<!DOCTYPE html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <link href="./css/amap.css" rel="stylesheet">
    <title>高德地图坐标拾取器</title>
</head>
<body>
<div id="divCoordinate" class="hide"></div>
<div class="amap-main">
    <div class="search">
        <div class="iptbox">
            <input type="text" id="searchipt" placeholder="请输入关键字进行搜索" maxlength="256" autocomplete="off" class="searchipt">
            <div class="searchbtn" id="searchbtn"><img src="./img/icon-search.png" class="icontip"></div>
        </div>
    </div>
    <div id="container" class="map" tabindex="0"></div>
    <div class="right">
        <div class="switch">
            <div style="padding-top: 46px;">
                当前选择城市：<a href="javascript:void(0)" id="dqcity">广州市</a>
                <div class="cityList" style="display: none;">
                    <div class="title">请选择城市：<a href="javascript:void(0)">×</a></div>
                    <div id="tdHotCities"></div>
                    <table>
                        <tbody>
                        <tr><td colspan="2" class="title">城市列表：</td></tr>
                        </tbody>
                        <tbody id="tbodyAllCities"></tbody>
                    </table>
                </div>
            </div>
            <div>坐标获取结果：<input type="text" id="txtCoordinate" value=""></div>
        </div>
        <div id="result" class="result">
            <span class="result-cue">搜索结果为空</span>
        </div>
    </div>
</div>
<script>
function getUrlParam(name, explode, url) {
	var param = window.location.search.substr(1);
	if(url){
		if(explode){
			param = url.substr(url.indexOf(explode) + 1);	
		}else{
			param = url.substr(url.indexOf('?') + 1);	
		}
	}else{
		if(explode){
			param = window.location.href.substr(window.location.href.indexOf(explode) + 1);	
		}
	}
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
	var r = param.match(reg);
	if (r != null) return unescape(r[2]); return '';
}
var params_address = decodeURI(getUrlParam('address'));
var params_lng = getUrlParam('lng') || 113.280637;
var params_lat = getUrlParam('lat') || 23.125178;
var params_city = decodeURI(getUrlParam('city')) || '广州';
document.getElementById('searchipt').value = params_address;
</script>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.3&key=c49a9c5ce6aefc5a0a70fc1436c3d34f"></script>
<script type="text/javascript" src="./js/jquery.min.js"></script>
<script type="text/javascript" src="./js/amap.js"></script>
</body>
</html>