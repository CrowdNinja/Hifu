const t=t=>(...e)=>{const n=t(...e);return n.isDirective=!0,n};class e{constructor(){this.isDirective=!0,this.isClass=!0}body(t){}}const n=t=>null!=t&&"boolean"==typeof t.isDirective,s="undefined"!=typeof window&&(null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback),i=(t,e,n=null,s=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,s),e=n}},o=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}},r={},a={},l=`{{lit-${String(Math.random()).slice(2)}}}`,c=`\x3c!--${l}--\x3e`,h=new RegExp(`${l}|${c}`);class d{constructor(t,e){this.parts=[],this.element=e;const n=[],s=[],i=document.createTreeWalker(e.content,133,null,!1);let o=0,r=-1,a=0;const{strings:c,values:{length:d}}=t;for(;a<d;){const t=i.nextNode();if(null!==t){if(r++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let s=0;for(let t=0;t<n;t++)u(e[t].name,"$lit$")&&s++;for(;s-- >0;){const e=c[a],n=g.exec(e)[2],s=n.toLowerCase()+"$lit$",i=t.getAttribute(s);t.removeAttribute(s);const o=i.split(h);this.parts.push({type:"attribute",index:r,name:n,strings:o,sanitizer:void 0}),a+=o.length-1}}"TEMPLATE"===t.tagName&&(s.push(t),i.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(l)>=0){const s=t.parentNode,i=e.split(h),o=i.length-1;for(let e=0;e<o;e++){let n,o=i[e];if(""===o)n=m();else{const t=g.exec(o);null!==t&&u(t[2],"$lit$")&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),n=document.createTextNode(o)}s.insertBefore(n,t),this.parts.push({type:"node",index:++r})}""===i[o]?(s.insertBefore(m(),t),n.push(t)):t.data=i[o],a+=o}}else if(8===t.nodeType)if(t.data===l){const e=t.parentNode;null!==t.previousSibling&&r!==o||(r++,e.insertBefore(m(),t)),o=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(n.push(t),r--),a++}else{let e=-1;for(;-1!==(e=t.data.indexOf(l,e+1));)this.parts.push({type:"node",index:-1}),a++}}else i.currentNode=s.pop()}for(const t of n)t.parentNode.removeChild(t)}}const u=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},p=t=>-1!==t.index,f=document.createComment(""),m=()=>f.cloneNode(),g=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class v{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=s?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,i=document.createTreeWalker(t,133,null,!1);let o,r=0,a=0,l=i.nextNode();for(;r<n.length;)if(o=n[r],p(o)){for(;a<o.index;)a++,"TEMPLATE"===l.nodeName&&(e.push(l),i.currentNode=l.content),null===(l=i.nextNode())&&(i.currentNode=e.pop(),l=i.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options,o);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options,o));r++}else this.__parts.push(void 0),r++;return s&&(document.adoptNode(t),customElements.upgrade(t)),t}}let y;const b=` ${l} `,w=document.createElement("template");class _{constructor(t,e,n,s){this.strings=t,this.values=e,this.type=n,this.processor=s}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let s=0;s<t;s++){const t=this.strings[s],i=t.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===t.indexOf("--\x3e",i+1);const o=g.exec(t);e+=null===o?t+(n?b:c):t.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+l}return e+=this.strings[t],e}getTemplateElement(){const t=w.cloneNode();return t.innerHTML=function(t){const e=window,n=e.trustedTypes||e.TrustedTypes;return n&&!y&&(y=n.createPolicy("lit-html",{createHTML:t=>t})),y?y.createHTML(t):t}(this.getHTML()),t}}class x extends _{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),i(e,n.firstChild),t}}const $=t=>null===t||!("object"==typeof t||"function"==typeof t),M=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]),C=t=>t,P=(t,e,n)=>C;let O=P;const T=document.createTextNode("");class A{constructor(t,e,n,s,i="attribute"){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];let o=s&&s.sanitizer;void 0===o&&(o=O(t,e,i),void 0!==s&&(s.sanitizer=o)),this.sanitizer=o;for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new S(this)}_getValue(){const t=this.strings,e=this.parts,n=t.length-1;if(1===n&&""===t[0]&&""===t[1]&&void 0!==e[0]){const t=e[0].value;if(!M(t))return t}let s="";for(let i=0;i<n;i++){s+=t[i];const n=e[i];if(void 0!==n){const t=n.value;if($(t)||!M(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[n],s}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=this.sanitizer(t),"symbol"==typeof t&&(t=String(t)),this.element.setAttribute(this.name,t)}}}class S{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===r||$(t)&&t===this.value||(this.value=t,n(t)||(this.committer.dirty=!0))}commit(){for(;n(this.value);){const t=this.value;this.value=r,t.isClass?t.body(this):t(this)}this.value!==r&&this.committer.commit()}}class D{constructor(t,e){this.value=void 0,this.__pendingValue=void 0,this.textSanitizer=void 0,this.options=t,this.templatePart=e}appendInto(t){this.startNode=t.appendChild(m()),this.endNode=t.appendChild(m())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=m()),t.__insert(this.endNode=m())}insertAfterPart(t){t.__insert(this.startNode=m()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){for(;n(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=r,t.isClass?t.body(this):t(this)}const t=this.__pendingValue;t!==r&&($(t)?t!==this.value&&this.__commitText(t):t instanceof _?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):M(t)?this.__commitIterable(t):t===a?(this.value=a,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling;if(t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType){void 0===this.textSanitizer&&(this.textSanitizer=O(e,"data","property"));const n=this.textSanitizer(t);e.data="string"==typeof n?n:String(n)}else{const e=T.cloneNode();this.__commitNode(e),void 0===this.textSanitizer&&(this.textSanitizer=O(e,"data","property"));const n=this.textSanitizer(t);e.data="string"==typeof n?n:String(n)}this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof v&&this.value.template===e)this.value.update(t.values);else{const n=this.endNode.parentNode;if(O!==P&&"STYLE"===n.nodeName||"SCRIPT"===n.nodeName)return void this.__commitText("/* lit-html will not write TemplateResults to scripts and styles */");const s=new v(e,t.processor,this.options),i=s._clone();s.update(t.values),this.__commitNode(i),this.value=s}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,s=0;for(const i of t)n=e[s],void 0===n&&(n=new D(this.options,this.templatePart),e.push(n),0===s?n.appendIntoPart(this):n.insertAfterPart(e[s-1])),n.setValue(i),n.commit(),s++;s<e.length&&(e.length=s,this.clear(n&&n.endNode))}clear(t=this.startNode){o(this.startNode.parentNode,t.nextSibling,this.endNode)}}class I{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;n(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=r,t.isClass?t.body(this):t(this)}if(this.__pendingValue===r)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=r}}class L extends A{constructor(t,e,n,s){super(t,e,n,s,"property"),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new E(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){if(this.dirty){this.dirty=!1;let t=this._getValue();t=this.sanitizer(t),this.element[this.name]=t}}}class E extends S{}let Y=!1;(()=>{try{const t={get capture(){return Y=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class N{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;n(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=r,t.isClass?t.body(this):t(this)}if(this.__pendingValue===r)return;const t=this.__pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=k(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=r}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const k=t=>t&&(Y?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);class R{handleAttributeExpressions(t,e,n,s,i){const o=e[0];if("."===o){return new L(t,e.slice(1),n,i).parts}return"@"===o?[new N(t,e.slice(1),s.eventContext)]:"?"===o?[new I(t,e.slice(1),n)]:new A(t,e,n,i).parts}handleTextExpression(t,e){return new D(t,e)}}const H=new R;function V(t){let e=j.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},j.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const s=t.strings.join(l);return n=e.keyString.get(s),void 0===n&&(n=new d(t,t.getTemplateElement()),e.keyString.set(s,n)),e.stringsArray.set(t.strings,n),n}const j=new Map,z=new WeakMap,X=(t,e,n)=>{let s=z.get(e);void 0===s&&(o(e,e.firstChild),z.set(e,s=new D(Object.assign({templateFactory:V},n),void 0)),s.appendInto(e)),s.setValue(t),s.commit()};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.5");const W=(t,...e)=>new _(t,e,"html",H),B=(t,...e)=>new x(t,e,"svg",H);var G=Object.freeze({__proto__:null,html:W,svg:B,DefaultTemplateProcessor:R,defaultTemplateProcessor:H,directive:t,Directive:e,isDirective:n,removeNodes:o,reparentNodes:i,noChange:r,nothing:a,AttributeCommitter:A,AttributePart:S,BooleanAttributePart:I,EventPart:N,isIterable:M,isPrimitive:$,NodePart:D,PropertyCommitter:L,PropertyPart:E,get sanitizerFactory(){return O},setSanitizerFactory:t=>{if(O!==P)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");O=t},parts:z,render:X,templateCaches:j,templateFactory:V,TemplateInstance:v,SVGTemplateResult:x,TemplateResult:_,createMarker:m,isTemplatePartActive:p,Template:d}),F=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(n){e[n]=t[n]&&function(e){return new Promise((function(s,i){(function(t,e,n,s){Promise.resolve(s).then((function(e){t({value:e,done:n})}),e)})(s,i,(e=t[n](e)).done,e.value)}))}}};const U=t((t,e)=>async n=>{var s,i;if(!(n instanceof D))throw new Error("asyncAppend can only be used in text bindings");if(t===n.value)return;let o;n.value=t;let r=0;try{for(var a,l=F(t);!(a=await l.next()).done;){let s=a.value;if(n.value!==t)break;0===r&&n.clear(),void 0!==e&&(s=e(s,r));let i=n.startNode;void 0!==o&&(i=m(),o.endNode=i,n.endNode.parentNode.insertBefore(i,n.endNode)),o=new D(n.options,n.templatePart),o.insertAfterNode(i),o.setValue(s),o.commit(),r++}}catch(t){s={error:t}}finally{try{a&&!a.done&&(i=l.return)&&await i.call(l)}finally{if(s)throw s.error}}});var J=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(n){e[n]=t[n]&&function(e){return new Promise((function(s,i){(function(t,e,n,s){Promise.resolve(s).then((function(e){t({value:e,done:n})}),e)})(s,i,(e=t[n](e)).done,e.value)}))}}};const q=t((t,e)=>async n=>{var s,i;if(!(n instanceof D))throw new Error("asyncReplace can only be used in text bindings");if(t===n.value)return;const o=new D(n.options,n.templatePart);n.value=t;let r=0;try{for(var a,l=J(t);!(a=await l.next()).done;){let s=a.value;if(n.value!==t)break;0===r&&(n.clear(),o.appendIntoPart(n)),void 0!==e&&(s=e(s,r)),o.setValue(s),o.commit(),r++}}catch(t){s={error:t}}finally{try{a&&!a.done&&(i=l.return)&&await i.call(l)}finally{if(s)throw s.error}}}),Z=new WeakMap,K=t(t=>e=>{if(!(e instanceof D))throw new Error("cache can only be used in text bindings");let n=Z.get(e);void 0===n&&(n=new WeakMap,Z.set(e,n));const s=e.value;if(s instanceof v){if(t instanceof _&&s.template===e.options.templateFactory(t))return void e.setValue(t);{let t=n.get(s.template);void 0===t&&(t={instance:s,nodes:document.createDocumentFragment()},n.set(s.template,t)),i(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof _){const s=e.options.templateFactory(t),i=n.get(s);void 0!==i&&(e.setValue(i.nodes),e.commit(),e.value=i.instance)}e.setValue(t)}),Q=new WeakMap,tt=t(t=>e=>{if(!(e instanceof S)||e instanceof E||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:n}=e,{element:s}=n;let i=Q.get(e);void 0===i&&(s.className=n.strings.join(" "),Q.set(e,i=new Set));const{classList:o}=s;i.forEach(e=>{e in t||(o.remove(e),i.delete(e))});for(const e in t){const n=t[e];n!=i.has(e)&&(n?(o.add(e),i.add(e)):(o.remove(e),i.delete(e)))}}),et=new WeakMap,nt=t((t,e)=>n=>{const s=et.get(n);if(Array.isArray(t)){if(Array.isArray(s)&&s.length===t.length&&t.every((t,e)=>t===s[e]))return}else if(s===t&&(void 0!==t||et.has(n)))return;n.setValue(e()),et.set(n,Array.isArray(t)?Array.from(t):t)}),st=t(t=>e=>{if(void 0===t&&e instanceof S){if(t!==e.value){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else e.setValue(t)}),it=(t,e)=>{const n=t.startNode.parentNode,s=null==e?t.endNode:e.startNode,i=n.insertBefore(m(),s);n.insertBefore(m(),s);const o=new D(t.options,void 0);return o.insertAfterNode(i),o},ot=(t,e)=>(t.setValue(e),t.commit(),t),rt=(t,e,n)=>{const s=t.startNode.parentNode,o=n?n.startNode:t.endNode,r=e.endNode.nextSibling;r!==o&&i(s,e.startNode,r,o)},at=t=>{o(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},lt=(t,e,n)=>{const s=new Map;for(let i=e;i<=n;i++)s.set(t[i],i);return s},ct=new WeakMap,ht=new WeakMap,dt=t((t,e,n)=>{let s;return void 0===n?n=e:void 0!==e&&(s=e),e=>{if(!(e instanceof D))throw new Error("repeat can only be used in text bindings");const i=ct.get(e)||[],o=ht.get(e)||[],r=[],a=[],l=[];let c,h,d=0;for(const e of t)l[d]=s?s(e,d):d,a[d]=n(e,d),d++;let u=0,p=i.length-1,f=0,m=a.length-1;for(;u<=p&&f<=m;)if(null===i[u])u++;else if(null===i[p])p--;else if(o[u]===l[f])r[f]=ot(i[u],a[f]),u++,f++;else if(o[p]===l[m])r[m]=ot(i[p],a[m]),p--,m--;else if(o[u]===l[m])r[m]=ot(i[u],a[m]),rt(e,i[u],r[m+1]),u++,m--;else if(o[p]===l[f])r[f]=ot(i[p],a[f]),rt(e,i[p],i[u]),p--,f++;else if(void 0===c&&(c=lt(l,f,m),h=lt(o,u,p)),c.has(o[u]))if(c.has(o[p])){const t=h.get(l[f]),n=void 0!==t?i[t]:null;if(null===n){const t=it(e,i[u]);ot(t,a[f]),r[f]=t}else r[f]=ot(n,a[f]),rt(e,n,i[u]),i[t]=null;f++}else at(i[p]),p--;else at(i[u]),u++;for(;f<=m;){const t=it(e,r[m+1]);ot(t,a[f]),r[f++]=t}for(;u<=p;){const t=i[u++];null!==t&&at(t)}ct.set(e,r),ht.set(e,l)}}),ut=new WeakMap,pt=document.createElement("template"),ft=t(t=>e=>{if(!(e instanceof D))throw new Error("unsafeHTML can only be used in text bindings");const n=ut.get(e);if(void 0!==n&&$(t)&&t===n.value&&e.value===n.fragment)return;const s=pt.cloneNode();s.innerHTML=t;const i=document.importNode(s.content,!0);e.setValue(i),ut.set(e,{value:t,fragment:i})}),mt=new WeakMap,gt=t((...t)=>e=>{let n=mt.get(e);void 0===n&&(n={lastRenderedIndex:2147483647,values:[]},mt.set(e,n));const s=n.values;let i=s.length;n.values=t;for(let o=0;o<t.length&&!(o>n.lastRenderedIndex);o++){const r=t[o];if($(r)||"function"!=typeof r.then){e.setValue(r),n.lastRenderedIndex=o;break}o<i&&r===s[o]||(n.lastRenderedIndex=2147483647,i=0,Promise.resolve(r).then(t=>{const s=n.values.indexOf(r);s>-1&&s<n.lastRenderedIndex&&(n.lastRenderedIndex=s,e.setValue(t),e.commit())}))}}),vt=new WeakMap;class yt extends e{constructor(t){super(),this.ifFn=t}body(t){const e=this.ifFn(),n=t.committer.element;if(e){if(!vt.has(t)){const e=n.nextSibling;vt.set(t,{element:n,nextSibling:e})}n.remove()}else{const e=vt.get(t);null!=e&&(e.nextSibling.parentNode.insertBefore(e.element,e.nextSibling),vt.delete(t))}}}const bt=[],wt=[];class _t extends e{constructor(t,e=!1){super(),this.previous={},this.style=t,this.detach=e}setStyle(t){this.style=t}setDetach(t){this.detach=t}body(t){bt.length=0,wt.length=0;const e=t.committer.element,n=e.style;let s=this.previous;for(const t in s)void 0===this.style[t]&&bt.push(t);for(const t in this.style){const e=this.style[t],n=s[t];void 0!==n&&n===e||wt.push(t)}if(bt.length||wt.length){let t,s;this.detach&&(t=e.parentNode,t&&(s=e.nextSibling,e.remove()));for(const t of bt)n.removeProperty(t);for(const t of wt){const e=this.style[t];t.includes("-")?n.setProperty(t,e):n[t]=e}this.detach&&t&&t.insertBefore(e,s),this.previous=Object.assign({},this.style)}}}class xt{constructor(){this.isAction=!0}}xt.prototype.isAction=!0;const $t={element:document.createTextNode(""),axis:"xy",threshold:10,onDown(t){},onMove(t){},onUp(t){},onWheel(t){}},Mt="undefined"!=typeof PointerEvent;let Ct=0;class Pt extends xt{constructor(t,e){super(),this.moving="",this.initialX=0,this.initialY=0,this.lastY=0,this.lastX=0,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onWheel=this.onWheel.bind(this),this.element=t,this.id=++Ct,this.options=Object.assign(Object.assign({},$t),e.pointerOptions),Mt?(t.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)):(t.addEventListener("touchstart",this.onPointerDown),document.addEventListener("touchmove",this.onPointerMove,{passive:!1}),document.addEventListener("touchend",this.onPointerUp),document.addEventListener("touchcancel",this.onPointerUp),t.addEventListener("mousedown",this.onPointerDown),document.addEventListener("mousemove",this.onPointerMove,{passive:!1}),document.addEventListener("mouseup",this.onPointerUp))}normalizeMouseWheelEvent(t){let e=t.deltaX||0,n=t.deltaY||0,s=t.deltaZ||0;const i=t.deltaMode,o=parseInt(getComputedStyle(t.target).getPropertyValue("line-height"));let r=1;switch(i){case 1:r=o;break;case 2:r=window.height}return e*=r,n*=r,s*=r,{x:e,y:n,z:s,event:t}}onWheel(t){const e=this.normalizeMouseWheelEvent(t);this.options.onWheel(e)}normalizePointerEvent(t){let e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0,event:t};switch(t.type){case"wheel":const n=this.normalizeMouseWheelEvent(t);e.x=n.x,e.y=n.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e}onPointerDown(t){if("mousedown"===t.type&&0!==t.button)return;this.moving="xy";const e=this.normalizePointerEvent(t);this.lastX=e.x,this.lastY=e.y,this.initialX=e.x,this.initialY=e.y,this.options.onDown(e)}handleX(t){let e=t.x-this.lastX;return this.lastY=t.y,this.lastX=t.x,e}handleY(t){let e=t.y-this.lastY;return this.lastY=t.y,this.lastX=t.x,e}onPointerMove(t){if(""===this.moving||"mousemove"===t.type&&0!==t.button)return;const e=this.normalizePointerEvent(t);if("x|y"===this.options.axis){let n=0,s=0;("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",n=this.handleX(e)),("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",s=this.handleY(e)),this.options.onMove({movementX:n,movementY:s,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("xy"===this.options.axis){let n=0,s=0;Math.abs(e.x-this.initialX)>this.options.threshold&&(n=this.handleX(e)),Math.abs(e.y-this.initialY)>this.options.threshold&&(s=this.handleY(e)),this.options.onMove({movementX:n,movementY:s,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}else if("x"===this.options.axis)("x"===this.moving||"xy"===this.moving&&Math.abs(e.x-this.initialX)>this.options.threshold)&&(this.moving="x",this.options.onMove({movementX:this.handleX(e),movementY:0,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}));else if("y"===this.options.axis){let n=0;("y"===this.moving||"xy"===this.moving&&Math.abs(e.y-this.initialY)>this.options.threshold)&&(this.moving="y",n=this.handleY(e)),this.options.onMove({movementX:0,movementY:n,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t})}}onPointerUp(t){this.moving="";const e=this.normalizePointerEvent(t);this.options.onUp({movementX:0,movementY:0,x:e.x,y:e.y,initialX:this.initialX,initialY:this.initialY,lastX:this.lastX,lastY:this.lastY,event:t}),this.lastY=0,this.lastX=0}destroy(t){Mt?(t.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)):(t.removeEventListener("mousedown",this.onPointerDown),document.removeEventListener("mousemove",this.onPointerMove),document.removeEventListener("mouseup",this.onPointerUp),t.removeEventListener("touchstart",this.onPointerDown),document.removeEventListener("touchmove",this.onPointerMove),document.removeEventListener("touchend",this.onPointerUp),document.removeEventListener("touchcancel",this.onPointerUp))}}function Ot(t){let e=0;return function(n){e||(e=requestAnimationFrame((function(){e=0,t.apply(void 0,[n])})))}}function Tt(t){return t&&"object"==typeof t&&!Array.isArray(t)}function At(t){if(void 0!==t.actions){const e=t.actions.map(t=>{const e=Object.assign({},t),n=Object.assign({},e.props);return delete n.state,delete n.api,delete e.element,e.props=n,e});t.actions=e}return function t(e,...n){const s=n.shift();if(Tt(e)&&Tt(s))for(const n in s)if(Tt(s[n]))void 0===e[n]&&(e[n]={}),e[n]=t(e[n],s[n]);else if(Array.isArray(s[n])){e[n]=[];for(let i of s[n])Tt(i)?e[n].push(t({},i)):e[n].push(i)}else e[n]=s[n];return n.length?t(e,...n):e}({},t)}function St(n,s){let i=0;const o=new Map;let r,a,l=new Map,c=0;const h=Promise.resolve(),d={},u=function(t){return class extends e{constructor(t){super(),this.instance=t}set(t,e){return this.actions=t,this.props=e,this}body(e){const n=e.committer.element;for(const e of this.actions)if(void 0!==e){let s;if(t.has(this.instance))for(const i of t.get(this.instance))if(i.componentAction.create===e&&i.element===n){s=i;break}if(s)s.props=this.props;else{void 0!==n.vido&&delete n.vido;const s={create:e,update(){},destroy(){}},i={instance:this.instance,componentAction:s,element:n,props:this.props};let o=[];t.has(this.instance)&&(o=t.get(this.instance)),o.push(i),t.set(this.instance,o)}}}}}(l);class p{constructor(t){this.instance=t}create(t,e){const n=new u(this.instance);return n.set(t,e),n}}const f=function(t,e,n){return class{constructor(t,e,n={}){this.instance=t,this.name=e.name,this.vidoInstance=e,this.props=n,this.destroy=this.destroy.bind(this),this.update=this.update.bind(this),this.change=this.change.bind(this),this.html=this.html.bind(this)}destroy(){return this.vidoInstance.debug&&(console.groupCollapsed(`destroying component ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.destroyComponent(this.instance,this.vidoInstance)}update(){return this.vidoInstance.debug&&(console.groupCollapsed(`updating component ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.vidoInstance.updateTemplate(this.vidoInstance)}change(s,i){this.vidoInstance.debug&&(console.groupCollapsed(`changing component ${this.instance}`),console.log(n({props:this.props,newProps:s,components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),t.get(this.instance).change(s,i)}html(e={}){const n=t.get(this.instance);if(n)return n.update(e,this.vidoInstance)}_getComponents(){return t}_getActions(){return e}}}(o,l,At);function m(){this.destroyable=[],this.onChangeFunctions=[],this.debug=!1,this.state=n,this.api=s,this.lastProps={},this.reuseComponents=this.reuseComponents.bind(this),this.onDestroy=this.onDestroy.bind(this),this.onChange=this.onChange.bind(this),this.update=this.update.bind(this);for(const t in d)this[t]=d[t]}m.prototype.html=W,m.prototype.svg=B,m.prototype.directive=t,m.prototype.asyncAppend=U,m.prototype.asyncReplace=q,m.prototype.cache=K,m.prototype.classMap=tt,m.prototype.guard=nt,m.prototype.ifDefined=st,m.prototype.repeat=dt,m.prototype.unsafeHTML=ft,m.prototype.until=gt,m.prototype.schedule=Ot,m.prototype.actionsByInstance=(t,e)=>{},m.prototype.StyleMap=_t,m.prototype.Detach=yt,m.prototype.PointerAction=Pt,m.prototype.addMethod=function(t,e){d[t]=e},m.prototype.Action=xt,m.prototype.onDestroy=function(t){this.destroyable.push(t)},m.prototype.onChange=function(t){this.onChangeFunctions.push(t)},m.prototype.update=function(){this.updateTemplate()},m.prototype.reuseComponents=function(t,e,n,s,i=!0){const o=[],r=t.length,a=e.length;let l=!1;!i||void 0!==e&&0!==e.length||(l=!0);let c=0;if(r<a){let i=a-r;for(;i;){const r=e[a-i],l=this.createComponent(s,n(r));t.push(l),o.push(l.instance),i--}}else if(r>a){let e=r-a;for(i&&(l=!0,c=r-e);e;){const n=r-e;i||(o.push(t[n].instance),t[n].destroy()),e--}i||(t.length=a)}let h=0;for(const s of t){const t=e[h];o.includes(s.instance)||s.change(n(t),{leave:l&&h>=c}),h++}};const g=function(t,e,n){return class{constructor(t,e,n,s){this.instance=t,this.vidoInstance=e,this.renderFunction=n,this.content=s}destroy(){var s;this.vidoInstance.debug&&(console.groupCollapsed(`component destroy method fired ${this.instance}`),console.log(n({props:this.vidoInstance.props,components:t.keys(),destroyable:this.vidoInstance.destroyable,actionsByInstance:e})),console.trace(),console.groupEnd()),"function"==typeof(null===(s=this.content)||void 0===s?void 0:s.destroy)&&this.content.destroy();for(const t of this.vidoInstance.destroyable)t();this.vidoInstance.onChangeFunctions=[],this.vidoInstance.destroyable=[],this.vidoInstance.update()}update(s={}){return this.vidoInstance.debug&&(console.groupCollapsed(`component update method fired ${this.instance}`),console.log(n({components:t.keys(),actionsByInstance:e})),console.trace(),console.groupEnd()),this.renderFunction(s)}change(s,i={leave:!1}){const o=s;this.vidoInstance.debug&&(console.groupCollapsed(`component change method fired ${this.instance}`),console.log(n({props:o,components:t.keys(),onChangeFunctions:this.vidoInstance.onChangeFunctions,changedProps:s,actionsByInstance:e})),console.trace(),console.groupEnd());for(const t of this.vidoInstance.onChangeFunctions)t(s,i)}}}(o,l,At);function v(t,e={},n=null){const s=t.name+":"+i++;let r;r=new m,r.instance=s,r.name=t.name,r.Actions=new p(s);const a=new f(s,r,e),c=new g(s,r,t(r,e,n),n);return o.set(s,c),o.get(s).change(e),r.debug&&(console.groupCollapsed(`component created ${s}`),console.log(At({props:e,components:o.keys(),actionsByInstance:l})),console.trace(),console.groupEnd()),a}m.prototype.createComponent=v;m.prototype.Slot=class extends e{constructor(t,e={},n=null){if(super(),this.components=[],Array.isArray(t))for(const s of t)this.components.push(v(s,e,n))}body(t){t.setValue(this.components.map(t=>t.html()))}change(t,e){for(const n of this.components)n.change(t,e)}getComponents(){return this.components}setComponents(t){this.components=t}destroy(){for(const t of this.components)t.destroy()}};return m.prototype.Slots=class{constructor(){this.slots={}}addSlot(t,e){void 0===this.slots[t]&&(this.slots[t]=[]),this.slots[t].push(e)}change(t,e){for(const n in this.slots)for(const s of this.slots[n])s.change(t,e)}destroy(){for(const t in this.slots)for(const e of this.slots[t])e.destroy()}get(t){return this.slots[t]}set(t,e){this.slots[t]=e}},m.prototype.destroyComponent=function(t,e){if(e.debug&&(console.groupCollapsed(`destroying component ${t}...`),console.log(At({components:o.keys(),actionsByInstance:l})),console.trace(),console.groupEnd()),l.has(t))for(const e of l.get(t))"function"==typeof e.componentAction.destroy&&e.componentAction.destroy(e.element,e.props);l.delete(t);const n=o.get(t);n.update(),n.destroy(),o.delete(t),e.debug&&(console.groupCollapsed(`component destroyed ${t}`),console.log(At({components:o.keys(),actionsByInstance:l})),console.trace(),console.groupEnd())},m.prototype.updateTemplate=function(){const t=++c,e=this;h.then((function(){t===c&&(c=0,e.render())}))},m.prototype.createApp=function(t){a=t.element;const e=this.createComponent(t.component,t.props);return r=e.instance,this.render(),e},m.prototype.executeActions=function(){var t,e,n;for(const s of l.values()){for(const i of s)if(void 0===i.element.vido){const s=i.componentAction,o=s.create;if(void 0!==o){let r;r=!0!==(null===(t=o.prototype)||void 0===t?void 0:t.isAction)&&void 0===o.isAction&&void 0===(null===(e=o.prototype)||void 0===e?void 0:e.update)&&void 0===(null===(n=o.prototype)||void 0===n?void 0:n.destroy)?o(i.element,i.props):new o(i.element,i.props),void 0!==r&&("function"==typeof r?s.destroy=r:("function"==typeof r.update&&(s.update=r.update.bind(r)),"function"==typeof r.destroy&&(s.destroy=r.destroy.bind(r))))}}else i.element.vido=i.props,"function"==typeof i.componentAction.update&&i.componentAction.update(i.element,i.props);for(const t of s)t.element.vido=t.props}},m.prototype.render=function(){const t=o.get(r);t?(X(t.update(),a),this.executeActions()):a&&a.remove()},m.prototype._components=o,m.prototype._actions=l,new m}St.prototype.lithtml=G,St.prototype.Action=xt,St.prototype.Directive=e,St.prototype.schedule=Ot,St.prototype.Detach=yt,St.prototype.StyleMap=_t,St.prototype.PointerAction=Pt,St.prototype.asyncAppend=U,St.prototype.asyncReplace=q,St.prototype.cache=K,St.prototype.classMap=tt,St.prototype.guard=nt,St.prototype.ifDefined=st,St.prototype.repeat=dt,St.prototype.unsafeHTML=ft,St.prototype.unti=gt;var Dt=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,s){return t[0]===e&&(n=s,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),s=this.__entries__[n];return s&&s[1]},e.prototype.set=function(e,n){var s=t(this.__entries__,e);~s?this.__entries__[s][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,s=t(n,e);~s&&n.splice(s,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,s=this.__entries__;n<s.length;n++){var i=s[n];t.call(e,i[1],i[0])}},e}()}(),It="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Lt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Et="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Lt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Yt=["top","right","bottom","left","width","height","size","weight"],Nt="undefined"!=typeof MutationObserver,kt=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,s=!1,i=0;function o(){n&&(n=!1,t()),s&&a()}function r(){Et(o)}function a(){var t=Date.now();if(n){if(t-i<2)return;s=!0}else n=!0,s=!1,setTimeout(r,e);i=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){It&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){It&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Yt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Rt=function(t,e){for(var n=0,s=Object.keys(e);n<s.length;n++){var i=s[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Ht=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Lt},Vt=Gt(0,0,0,0);function jt(t){return parseFloat(t)||0}function zt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+jt(t["border-"+n+"-width"])}),0)}function Xt(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Vt;var s=Ht(t).getComputedStyle(t),i=function(t){for(var e={},n=0,s=["top","right","bottom","left"];n<s.length;n++){var i=s[n],o=t["padding-"+i];e[i]=jt(o)}return e}(s),o=i.left+i.right,r=i.top+i.bottom,a=jt(s.width),l=jt(s.height);if("border-box"===s.boxSizing&&(Math.round(a+o)!==e&&(a-=zt(s,"left","right")+o),Math.round(l+r)!==n&&(l-=zt(s,"top","bottom")+r)),!function(t){return t===Ht(t).document.documentElement}(t)){var c=Math.round(a+o)-e,h=Math.round(l+r)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(h)&&(l-=h)}return Gt(i.left,i.top,a,l)}var Wt="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Ht(t).SVGGraphicsElement}:function(t){return t instanceof Ht(t).SVGElement&&"function"==typeof t.getBBox};function Bt(t){return It?Wt(t)?function(t){var e=t.getBBox();return Gt(0,0,e.width,e.height)}(t):Xt(t):Vt}function Gt(t,e,n,s){return{x:t,y:e,width:n,height:s}}var Ft=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Gt(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Bt(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Ut=function(t,e){var n,s,i,o,r,a,l,c=(s=(n=e).x,i=n.y,o=n.width,r=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),Rt(l,{x:s,y:i,width:o,height:r,top:i,right:s+o,bottom:r+i,left:s}),l);Rt(this,{target:t,contentRect:c})},Jt=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new Dt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Ht(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Ft(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Ht(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Ut(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),qt="undefined"!=typeof WeakMap?new WeakMap:new Dt,Zt=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=kt.getInstance(),s=new Jt(e,n,this);qt.set(this,s)};["observe","unobserve","disconnect"].forEach((function(t){Zt.prototype[t]=function(){var e;return(e=qt.get(this))[t].apply(e,arguments)}}));var Kt=void 0!==Lt.ResizeObserver?Lt.ResizeObserver:Zt;function Qt(t,e={}){const{api:n,state:s,onDestroy:i,Actions:o,update:r,createComponent:a,html:l,StyleMap:c,schedule:h}=t,d=n.name;i(s.subscribe("config.plugins",e=>{if(void 0!==e&&Array.isArray(e))for(const n of e){const e=n(t);"function"==typeof e?i(e):e&&e.hasOwnProperty("destroy")&&e.destroy()}}));const u=[];let p,f;u.push(s.subscribe("config.components.List",t=>p=t)),u.push(s.subscribe("config.components.Chart",t=>f=t));const m=a(p);i(m.destroy);const g=a(f);let v;i(g.destroy),i(()=>{u.forEach(t=>t())}),i(s.subscribe("config.wrappers.Main",t=>v=t));const y=n.getActions("main");let b,w;const _=new c({}),x=new c({}),$=new c({});let M,C=0,P=!1;function O(t,e){if(s.get("_internal.flatTreeMap").length&&"subscribe"===e.type)return;const i=s.get("config.list.rows"),o=[];for(const t in i)o.push(i[t]);n.fillEmptyRowValues(o);const a=s.get("config.chart.items"),l=[];for(const t in a)l.push(a[t]);const c=n.makeTreeMap(o,l);s.update("_internal.treeMap",c);const h=n.getFlatTreeMapById(c);s.update("_internal.flatTreeMapById",h);const d=n.flattenTreeMap(c);s.update("_internal.flatTreeMap",d),r()}i(s.subscribe("config.classNames",t=>{const e=s.get("config");b=n.getClass(d,{config:e}),P&&(b+=` ${d}__list-column-header-resizer--active`),w=n.getClass("vertical-scroll",{config:e}),r()})),i(s.subscribeAll(["config.height","config.headerHeight","_internal.scrollBarHeight"],(function(){const t=s.get("config"),e=s.get("_internal.scrollBarHeight"),n=t.height-t.headerHeight-e;s.update("_internal.height",n),_.style["--height"]=t.height+"px",x.style.height=n+"px",x.style.width=e+"px",x.style["margin-top"]=t.headerHeight+"px",r()}))),i(s.subscribe("_internal.list.columns.resizer.active",(function(t){P=t,b=n.getClass(n.name),P&&(b+=` ${n.name}__list-column-header-resizer--active`),r()}))),i(s.subscribeAll(["config.list.rows;","config.chart.items;"],O)),i(s.subscribeAll(["config.list.rows.*.parentId","config.chart.items.*.rowId"],O,{bulk:!0})),i(s.subscribeAll(["config.list.rows.*.expanded","_internal.treeMap;"],(function(){const t=s.get("config.list.rows"),e=n.getRowsFromIds(n.getRowsWithParentsExpanded(s.get("_internal.flatTreeMap"),s.get("_internal.flatTreeMapById"),t),t);C=n.getRowsHeight(e),s.update("_internal.list.rowsHeight",C),s.update("_internal.list.rowsWithParentsExpanded",e),r()}),{bulk:!0})),i(s.subscribeAll(["_internal.list.rowsWithParentsExpanded;","config.scroll.top","config.chart.items"],(function(){const{visibleRows:t,compensation:e}=n.getVisibleRowsAndCompensation(s.get("_internal.list.rowsWithParentsExpanded")),i=s.get("config.scroll.smooth"),o=s.get("_internal.list.visibleRows");let a=!0;s.update("config.scroll.compensation.y",i?-e:0),t.length!==o.length?a=!0:t.length&&(a=t.some((t,e)=>void 0===o[e]||t.id!==o[e].id)),a&&s.update("_internal.list.visibleRows",t);const l=[];for(const e of t)for(const t of e._internal.items)l.push(t);s.update("_internal.chart.visibleItems",l),r()}),{bulk:!0}));let T=0;i(s.subscribe("_internal.list.visibleRows;",(function(){const t=s.get("config.scroll.top");$.style.width="1px",$.style.height=C+"px",T!==t&&M&&(T=t,M.scrollTop=t),r()})));const A=(t,e)=>{const s=[];let i=e.leftGlobal;const o=e.rightGlobal,r=e.timePerPixel;let a=i-n.time.date(i).startOf(t),l=a/r,c=0,h=0;for(;i<o;){const e={sub:a,subPx:l,leftGlobal:i,rightGlobal:n.time.date(i).endOf(t).valueOf(),width:0,leftPx:0,rightPx:0};e.width=(e.rightGlobal-e.leftGlobal+a)/r,h=e.width>h?e.width:h,e.leftPx=c,c+=e.width,e.rightPx=c,s.push(e),i=e.rightGlobal+1,a=0,l=0}e.maxWidth[t]=h,e.dates[t]=s};if(i(s.subscribeAll(["config.chart.time","_internal.dimensions.width","config.scroll.left","_internal.scrollBarHeight","_internal.list.width","_internal.chart.dimensions"],h((function(){const t=s.get("_internal.chart.dimensions.width");let e=n.mergeDeep({},s.get("config.chart.time"));e=n.time.recalculateFromTo(e);let i=s.get("config.scroll.left");if(e.timePerPixel=Math.pow(2,e.zoom),e.totalViewDurationMs=n.time.date(e.to).diff(e.from,"milliseconds"),e.totalViewDurationPx=e.totalViewDurationMs/e.timePerPixel,i>e.totalViewDurationPx&&(i=e.totalViewDurationPx-t),e.leftGlobal=i*e.timePerPixel+e.from,e.rightGlobal=e.leftGlobal+t*e.timePerPixel,e.leftInner=e.leftGlobal-e.from,e.rightInner=e.rightGlobal-e.from,e.leftPx=e.leftInner/e.timePerPixel,e.rightPx=e.rightInner/e.timePerPixel,Math.round(e.rightGlobal/e.timePerPixel)>Math.round(e.to/e.timePerPixel)&&0===i){const t=(e.rightGlobal-e.to)/(e.rightGlobal-e.from);e.timePerPixel=e.timePerPixel-e.timePerPixel*t,e.zoom=Math.log(e.timePerPixel)/Math.log(2),e.leftGlobal=i*e.timePerPixel+e.from,e.rightGlobal=e.to,e.rightInner=e.rightGlobal-e.from,e.totalViewDurationMs=e.to-e.from,e.totalViewDurationPx=e.totalViewDurationMs/e.timePerPixel,e.rightInner=e.rightGlobal-e.from,e.rightPx=e.rightInner/e.timePerPixel,e.leftPx=e.leftInner/e.timePerPixel}A("day",e),A("month",e),s.update("_internal.chart.time",e);let o=0;e.dates.day&&0!==e.dates.day.length&&(o=e.dates.day[0].subPx),s.update("config.scroll.compensation.x",o),r()})),{bulk:!0})),!0===s.get("config.usageStatistics")&&""===location.port&&""!==location.host&&!location.host.startsWith("localhost"))try{const t=new XMLHttpRequest;t.open("POST","https://gstc-us.neuronet.io/"),t.send(JSON.stringify({location:{href:location.href,host:location.host}}))}catch(t){}let S=0;const D={handleEvent:function(t){if(t.stopPropagation(),t.preventDefault(),"scroll"===t.type){const e=t.target.scrollTop,n=t=>{t.top=e,S=t.top;const n=s.get("_internal.elements.vertical-scroll-inner");if(n){const e=n.clientHeight;t.percent.top=t.top/e}return t};S!==e&&s.update("config.scroll",n,{only:["top","percent.top"]})}else{const e=n.normalizeMouseWheelEvent(t),i=s.get("config.scroll.xMultiplier"),o=s.get("config.scroll.yMultiplier");t.shiftKey&&e.y?s.update("config.scroll.left",t=>n.limitScroll("left",t+=e.y*i)):e.x?s.update("config.scroll.left",t=>n.limitScroll("left",t+=e.x*i)):s.update("config.scroll.top",t=>S=n.limitScroll("top",t+=e.y*o))}},passive:!1,capture:!1},I={width:0,height:0};let L;class E{constructor(t){L||(L=new Kt((e,n)=>{const i=t.clientWidth,o=t.clientHeight;I.width===i&&I.height===o||(I.width=i,I.height=o,s.update("_internal.dimensions",I))}),L.observe(t),s.update("_internal.elements.main",t))}update(){}destroy(t){L.unobserve(t)}}y.includes(E)||y.push(E),i(()=>{L.disconnect()});const Y=Object.assign(Object.assign({},e),{api:n,state:s}),N=o.create(y,Y),k=o.create([function(t){M||(M=t,s.update("_internal.elements.vertical-scroll",t))}]),R=o.create([function(t){s.update("_internal.elements.vertical-scroll-inner",t)}]);return n=>v(l`
        <div
          data-info-url="https://github.com/neuronetio/gantt-schedule-timeline-calendar"
          class=${b}
          style=${_}
          @scroll=${D}
          @wheel=${D}
          data-actions=${N}
        >
          ${m.html()}${g.html()}
          <div
            class=${w}
            style=${x}
            @scroll=${D}
            @wheel=${D}
            data-actions=${k}
          >
            <div style=${$} data-actions=${R} />
          </div>
        </div>
      `,{props:e,vido:t,templateProps:n})}function te(t,e={}){const{api:n,state:s,onDestroy:i,Actions:o,update:r,reuseComponents:a,html:l,schedule:c,StyleMap:h,cache:d}=t,u=n.getActions("list");let p,f;i(s.subscribe("config.wrappers.List",t=>p=t));const m=s.subscribe("config.components.ListColumn",t=>f=t);let g,v,y;!function(){const t=s.get("config.list.expander.icons"),e={};for(const s in t){const i=t[s];e[s]=n.getSVGIconSrc(i)}s.update("_internal.list.expander.icons",e)}(),function(){const t={open:"",close:""},e=s.get("config.list.toggle.icons");for(const s in e){const i=e[s];t[s]=n.getSVGIconSrc(i)}s.update("_internal.list.toggle.icons",t)}(),i(s.subscribe("config.list",(function(){v=s.get("config.list"),y=v.columns.percent,r()}))),i(s.subscribe("config.classNames",()=>{g=n.getClass("list",{list:v}),r()}));let b=[];i(s.subscribe("config.list.columns.data;",(function(t){const e=a(b,Object.values(t),t=>({columnId:t.id}),f);return r(),e})));const w=new h({height:"","--expander-padding-width":"","--expander-size":""});function _(t){t.stopPropagation(),t.preventDefault(),c(()=>{if("scroll"===t.type)s.update("config.scroll.top",t.target.scrollTop);else{const e=n.normalizeMouseWheelEvent(t);s.update("config.scroll.top",t=>n.limitScroll("top",t+=e.y*s.get("config.scroll.yMultiplier")))}})()}let x;function $(t){x||(x=t.clientWidth,0===y&&(x=0),s.update("_internal.list.width",x))}i(s.subscribeAll(["config.height","config.list.expander"],t=>{const e=s.get("config.list.expander");w.style.height=s.get("config.height")+"px",w.style["--expander-padding-width"]=e.padding+"px",w.style["--expander-size"]=e.size+"px",r()})),i(()=>{b.forEach(t=>t.destroy()),m()});u.push(class{constructor(t,e){e.state.update("_internal.elements.list",t),$(t)}update(t){return $(t)}});const M=o.create(u,Object.assign(Object.assign({},e),{api:n,state:s}));return e=>p(d(v.columns.percent>0?l`
              <div class=${g} data-actions=${M} style=${w} @scroll=${_} @wheel=${_}>
                ${b.map(t=>t.html())}
              </div>
            `:""),{vido:t,props:{},templateProps:e})}class ee{constructor(t,e){let n=!1,s=e.state.get("_internal.elements.list-columns");void 0===s&&(s=[],n=!0),s.includes(t)||(s.push(t),n=!0),n&&e.state.update("_internal.elements.list-columns",s)}destroy(t,e){e.state.update("_internal.elements.list-columns",e=>e.filter(e=>e!==t))}}function ne(t,e){const{api:n,state:s,onDestroy:i,onChange:o,Actions:r,update:a,createComponent:l,reuseComponents:c,html:h,StyleMap:d}=t;let u;i(s.subscribe("config.wrappers.ListColumn",t=>u=t));const p=[];let f,m;p.push(s.subscribe("config.components.ListColumnRow",t=>f=t)),p.push(s.subscribe("config.components.ListColumnHeader",t=>m=t));const g=Object.assign(Object.assign({},e),{api:n,state:s}),v=n.getActions("list-column"),y=n.getActions("list-column-rows");let b,w,_;const x=new d({width:"","--width":""}),$=new d({width:"",height:""}),M=new d({width:"",height:""});let C,P,O=`config.list.columns.data.${e.columnId}`,T=s.subscribe(O,(function(t){C=t,a()}));function A(){const t=s.get("config.list"),e=s.get("config.scroll.compensation.y");_=t.columns.data[C.id].width*t.columns.percent*.01,P=_;const n=s.get("_internal.height");x.style.width=P+"px",x.style["--width"]=P+"px",$.style.height=n+"px",M.style.height=n+Math.abs(e)+"px",M.style.transform=`translate(0px, ${e}px)`}let S=s.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${C.id}.width`,"_internal.chart.dimensions.width","_internal.height","config.scroll.compensation.y","_internal.list.width"],A,{bulk:!0});const D=l(m,{columnId:e.columnId});i(D.destroy),o(t=>{e=t;for(const t in e)g[t]=e[t];T&&T(),D.change({columnId:e.columnId}),O=`config.list.columns.data.${e.columnId}`,T=s.subscribe(O,(function(t){C=t,a()})),S&&S(),S=s.subscribeAll(["config.list.columns.percent","config.list.columns.resizer.width",`config.list.columns.data.${C.id}.width`,"_internal.chart.dimensions.width","_internal.height","config.scroll.compensation.y","_internal.list.width"],A,{bulk:!0}),D.change(e)}),i(()=>{T(),S()}),i(s.subscribe("config.classNames",t=>{b=n.getClass("list-column"),w=n.getClass("list-column-rows"),a()}));const I=[];function L(t){return t.html()}i(s.subscribe("_internal.list.visibleRows;",t=>{const n=c(I,t||[],t=>t&&{columnId:e.columnId,rowId:t.id,width:P},f);return a(),n})),i(()=>{I.forEach(t=>t.destroy()),p.forEach(t=>t())}),v.push(ee);const E=r.create(v,{column:C,state:s,api:n}),Y=r.create(y,{api:n,state:s});return n=>u(h`
        <div class=${b} data-actions=${E} style=${x}>
          ${D.html()}
          <div class=${w} style=${$} data-actions=${Y}>
            <div class=${w+"--scroll-compensation"} style=${M}>
              ${I.map(L)}
            </div>
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}function se(t,e){const{api:n,state:s,onDestroy:i,onChange:o,Actions:r,update:a,createComponent:l,html:c,cache:h,StyleMap:d}=t,u=Object.assign(Object.assign({},e),{api:n,state:s});let p;i(s.subscribe("config.wrappers.ListColumnHeader",t=>p=t));const f=n.getActions("list-column-header"),m=[];let g;m.push(s.subscribe("config.components.ListColumnHeaderResizer",t=>g=t));const v=l(g,{columnId:e.columnId});let y;m.push(s.subscribe("config.components.ListColumnRowExpander",t=>y=t));const b=l(y,{});let w;i(()=>{v.destroy(),b.destroy(),m.forEach(t=>t())});let _,x,$=s.subscribe(`config.list.columns.data.${e.columnId}`,t=>{w=t,a()});i($),o(t=>{e=t;for(const t in e)u[t]=e[t];$&&$(),$=s.subscribe(`config.list.columns.data.${e.columnId}`,t=>{w=t,a()})}),i(s.subscribe("config.classNames",()=>{_=n.getClass("list-column-header"),x=n.getClass("list-column-header-content")}));const M=new d({height:"","--height":"","--paddings-count":""});i(s.subscribe("config.headerHeight",()=>{const t=s.get("config");M.style.height=t.headerHeight+"px",M.style["--height"]=t.headerHeight+"px",M.style["--paddings-count"]="1",a()}));const C=r.create(f,u);return n=>p(c`
        <div class=${_} style=${M} data-actions=${C}>
          ${h(w.expander?c`
      <div class=${x}>
        ${b.html()}${v.html(w)}
      </div>
    `:c`
      <div class=${x}>
        ${v.html(w)}
      </div>
    `)}
        </div>
      `,{vido:t,props:e,templateProps:n})}function ie(t,e){const{api:n,state:s,onDestroy:i,update:o,html:r,schedule:a,Actions:l,PointerAction:c,cache:h,StyleMap:d}=t,u="list-column-header-resizer",p=n.getActions(u),f=n.getActions(u+"-dots");let m,g,v,y,b,w,_;i(s.subscribe("config.wrappers.ListColumnHeaderResizer",t=>m=t)),i(s.subscribe(`config.list.columns.data.${e.columnId}`,t=>{g=t,o()}));const x=new d({width:""});let $=!1;i(s.subscribe("config.classNames",t=>{v=n.getClass(u,{column:g}),y=n.getClass(u+"-container",{column:g}),b=n.getClass(u+"-dots",{column:g}),w=n.getClass(u+"-dots-dot",{column:g}),o()})),i(s.subscribeAll([`config.list.columns.data.${g.id}.width`,"config.list.columns.percent","config.list.columns.resizer.width","config.list.columns.resizer.inRealTime"],(t,e)=>{const n=s.get("config.list");_=g.width*n.columns.percent*.01,x.style["--width"]=n.columns.resizer.width+"px",$=n.columns.resizer.inRealTime,s.update("_internal.list.width",_),o()}));let M=[1,2,3,4,5,6,7,8];i(s.subscribe("config.list.columns.resizer.dots",t=>{M=[];for(let e=0;e<t;e++)M.push(e);o()}));let C=_;const P=`config.list.columns.data.${g.id}.width`,O={column:g,api:n,state:s,pointerOptions:{axis:"x",onMove:a((function({movementX:t}){let e=s.get("config.list.columns.minWidth");"number"==typeof g.minWidth&&(e=g.minWidth),C+=t,C<e&&(C=e),$&&s.update(P,C)}))}};p.push(c);const T=l.create(p,O),A=l.create(f,O);return n=>m(r`
        <div class=${v} data-actions=${T}>
          <div class=${y}>
            ${h(g.header.html?r`
                    ${g.header.html}
                  `:g.header.content)}
          </div>
          <div class=${b} style=${x} data-actions=${A}>
            ${M.map(t=>r`
                  <div class=${w} />
                `)}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}class oe{constructor(t,e){let n=e.state.get("_internal.elements.list-column-rows"),s=!1;void 0===n&&(s=!0,n=[]),n.includes(t)||(n.push(t),s=!0),s&&e.state.update("_internal.elements.list-column-rows",n)}destroy(t,e){e.state.update("_internal.elements.list-column-rows",e=>e.filter(e=>e!==t))}}function re(t,e){const{api:n,state:s,onDestroy:i,Detach:o,Actions:r,update:a,html:l,createComponent:c,onChange:h,StyleMap:d,unsafeHTML:u,PointerAction:p}=t,f=Object.assign(Object.assign({},e),{api:n,state:s});let m=!1;const g=new o(()=>m);let v,y;i(s.subscribe("config.wrappers.ListColumnRow",t=>v=t)),i(s.subscribe("config.components.ListColumnRowExpander",t=>y=t));let b=`_internal.flatTreeMapById.${e.rowId}`,w=s.get(b),_=`config.list.columns.data.${e.columnId}`,x=s.get(_);const $=new d(x.expander?{height:"",top:"","--height":"","--expander-padding-width":"","--expander-size":""}:{height:"",top:"","--height":""},!0);let M,C;const P=c(y,{row:w});h((t,n)=>{if(n.leave||void 0===t.rowId||void 0===t.columnId)return m=!0,M&&M(),C&&C(),void a();m=!1,e=t;for(const t in e)f[t]=e[t];const i=e.rowId,o=e.columnId;M&&M(),C&&C(),b=`_internal.flatTreeMapById.${i}`,_=`config.list.columns.data.${o}`,M=s.subscribeAll([b,_,"config.list.expander"],t=>{if(x=s.get(_),w=s.get(b),void 0===x||void 0===w)return m=!0,void a();if(void 0===x||void 0===w)return;const e=s.get("config.list.expander");$.setStyle({}),$.style.height=w.height+"px",$.style["--height"]=w.height+"px",x.expander&&($.style["--expander-padding-width"]=e.padding*(w._internal.parents.length+1)+"px");for(const t of w._internal.parents){const e=s.get(`_internal.flatTreeMapById.${t}`);if("object"==typeof e.style&&"Object"===e.style.constructor.name&&"object"==typeof e.style.children){const t=e.style.children;for(const e in t)$.style[e]=t[e]}}if("object"==typeof w.style&&"Object"===w.style.constructor.name&&"object"==typeof w.style.current){const t=w.style.current;for(const e in t)$.style[e]=t[e]}a()},{bulk:!0}),P&&P.change({row:w}),C=s.subscribe(_,t=>{x=t,a()})}),i(()=>{P&&P.destroy(),C(),M()});const O=n.getActions("list-column-row");let T;i(s.subscribe("config.classNames",t=>{T=n.getClass("list-column-row"),a()})),O.includes(oe)||O.push(oe),f.pointerOptions={axis:"x|y",onMove({event:t,movementX:e,movementY:i}){t.stopPropagation(),t.preventDefault(),e?s.update("config.list.columns.percent",t=>((t+=e*s.get("config.scroll.xMultiplier"))<0&&(t=0),t>100&&(t=100),t)):i&&s.update("config.scroll.top",t=>(t-=i*s.get("config.scroll.yMultiplier"),t=n.limitScroll("top",t)))}},O.push(p);const A=r.create(O,f);return n=>v(l`
        <div detach=${g} class=${T} style=${$} data-actions=${A}>
          ${x.expander?P.html():null}
          <div class=${T+"-content"}>
            ${x.isHTML?void 0===w?null:"function"==typeof x.data?u(x.data(w)):u(w[x.data]):void 0===w?null:"function"==typeof x.data?x.data(w):w[x.data]}
          </div>
        </div>
      `,{vido:t,props:e,templateProps:n})}function ae(t,e){const{api:n,state:s,onDestroy:i,Actions:o,update:r,html:a,createComponent:l,onChange:c}=t,h=n.getActions("list-column-row-expander"),d=Object.assign(Object.assign({},e),{api:n,state:s});let u,p;const f=s.subscribe("config.components.ListColumnRowExpanderToggle",t=>p=t),m=l(p,e.row?{row:e.row}:{});let g;if(i(()=>{m.destroy(),f()}),i(s.subscribe("config.wrappers.ListColumnRowExpander",t=>g=t)),i(s.subscribe("config.classNames",t=>{u=n.getClass("list-column-row-expander"),r()})),e.row){c((function(t){e=t;for(const t in e)d[t]=e[t];m.change(e)}))}const v=o.create(h,d);return n=>g(a`
        <div class=${u} data-action=${v}>
          ${m.html()}
        </div>
      `,{vido:t,props:e,templateProps:n})}function le(t,e){const{api:n,state:s,onDestroy:i,Actions:o,update:r,html:a,onChange:l,cache:c}=t,h=Object.assign(Object.assign({},e),{api:n,state:s});let d;i(s.subscribe("config.wrappers.ListColumnRowExpanderToggle",t=>d=t));const u=n.getActions("list-column-row-expander-toggle");let p,f,m,g,v,y,b,w=!1;if(i(s.subscribe("config.classNames",t=>{p=n.getClass("list-column-row-expander-toggle"),f=p+"-child",m=p+"-open",g=p+"-closed",r()})),i(s.subscribe("_internal.list.expander.icons",t=>{t&&(v=t.child,y=t.open,b=t.closed),r()})),e.row){function _(t){w=t,r()}let t;l((function(n){var i,o;e=n;for(const t in e)h[t]=e[t];t&&t(),(null===(o=null===(i=e)||void 0===i?void 0:i.row)||void 0===o?void 0:o.id)&&(t=s.subscribe(`config.list.rows.${e.row.id}.expanded`,_))})),i((function(){t&&t()}))}else{function _(t){for(const e of t)if(e.value){w=!0;break}r()}i(s.subscribe("config.list.rows.*.expanded",_,{bulk:!0}))}function x(){w=!w,e.row?s.update(`config.list.rows.${e.row.id}.expanded`,w):s.update("config.list.rows",t=>{for(const e in t)t[e].expanded=w;return t},{only:["*.expanded"]})}const $=o.create(u,h);return n=>{return d(a`
        <div class=${p} data-action=${$} @click=${x}>
          ${c(v?0===(null===(o=null===(i=null===(s=e.row)||void 0===s?void 0:s._internal)||void 0===i?void 0:i.children)||void 0===o?void 0:o.length)?a`
          <img width="16" height="16" class=${f} src=${v} />
        `:w?a`
            <img width="16" height="16" class=${m} src=${y} />
          `:a`
            <img width="16" height="16" class=${g} src=${b} />
          `:"")}
        </div>
      `,{vido:t,props:e,templateProps:n});var s,i,o}}function ce(t,e={}){const{html:n,onDestroy:s,api:i,state:o,update:r}=t;let a,l;s(o.subscribe("config.classNames",t=>{a=i.getClass("list-toggle")})),s(o.subscribe("config.wrappers.ListToggle",t=>l=t));let c={open:"",close:""};s(o.subscribe("_internal.list.toggle.icons",t=>{t&&(c=t,r())}));let h=!0;function d(t){o.update("config.list.columns.percent",t=>0===t?100:0)}return s(o.subscribe("config.list.columns.percent",t=>h=0!==t)),s=>l(n`
        <div class=${a} @click=${d}><img src=${h?c.close:c.open} /></div>
      `,{props:e,vido:t,templateProps:s})}function he(t,e={}){const{api:n,state:s,onDestroy:i,Actions:o,update:r,html:a,StyleMap:l,createComponent:c}=t,h=s.get("config.components.ChartCalendar"),d=s.get("config.components.ChartTimeline");let u;i(s.subscribe("config.wrappers.Chart",t=>u=t));const p=c(h);i(p.destroy);const f=c(d);let m,g,v,y;i(f.destroy);const b=new l({}),w=new l({}),_=n.getActions("chart");function x(t){if("scroll"===t.type)s.update("config.scroll.left",t.target.scrollLeft);else{const e=n.normalizeMouseWheelEvent(t),i=s.get("config.scroll.xMultiplier"),o=s.get("config.scroll.yMultiplier");t.shiftKey&&e.y?s.update("config.scroll.left",t=>n.limitScroll("left",t+=e.y*i)):e.x?s.update("config.scroll.left",t=>n.limitScroll("left",t+=e.x*i)):s.update("config.scroll.top",t=>n.limitScroll("top",t+=e.y*o))}const e=s.get("_internal.elements.chart"),i=s.get("_internal.elements.horizontal-scroll-inner");if(e){const t=s.get("config.scroll.left");let n=0;t&&(n=Math.round(t/(i.clientWidth-e.clientWidth)*100),n>100&&(n=100)),s.update("config.scroll.percent.left",n)}}i(s.subscribe("config.classNames",t=>{m=n.getClass("chart"),g=n.getClass("horizontal-scroll"),v=n.getClass("horizontal-scroll-inner"),r()})),i(s.subscribe("config.scroll.left",t=>{y&&(y.scrollLeft=t),r()})),i(s.subscribeAll(["_internal.chart.dimensions.width","_internal.chart.time.totalViewDurationPx"],(function(t,e){b.style.width=s.get("_internal.chart.dimensions.width")+"px",w.style.width=s.get("_internal.chart.time.totalViewDurationPx")+"px",w.style.height="1px",r()})));let $,M=0;_.push((function(t){$||($=new Kt((e,n)=>{const i=t.clientWidth,o=t.clientHeight,r=i-s.get("_internal.scrollBarHeight");M!==i&&(M=i,s.update("_internal.chart.dimensions",{width:i,innerWidth:r,height:o}))}),$.observe(t),s.update("_internal.elements.chart",t))})),i(()=>{$.disconnect()});const C=o.create(_,{api:n,state:s}),P=o.create([function(t){y||(y=t,s.update("_internal.elements.horizontal-scroll",t))}]),O=o.create([function(t){s.get("_internal.elements.horizontal-scroll-inner")!==t&&s.update("_internal.elements.horizontal-scroll-inner",t)}]);return e=>u(a`
        <div class=${m} data-actions=${C}>
          ${p.html()}${f.html()}
          <div class=${g} style=${b} data-actions=${P} @scroll=${x}>
            <div class=${v} style=${w} data-actions=${O} />
          </div>
        </div>
      `,{vido:t,props:{},templateProps:e})}function de(t,e){const{api:n,state:s,onDestroy:i,Actions:o,update:r,reuseComponents:a,html:l,StyleMap:c}=t,h=n.getActions("chart-calendar"),d=Object.assign(Object.assign({},e),{api:n,state:s}),u=s.get("config.components.ChartCalendarDate");let p,f,m;i(s.subscribe("config.wrappers.ChartCalendar",t=>p=t)),i(s.subscribe("config.classNames",t=>{f=n.getClass("chart-calendar"),r()}));const g=new c({height:"","--headerHeight":""});i(s.subscribe("config.headerHeight",t=>{m=t,g.style.height=m+"px",g.style["--calendar-height"]=m+"px",r()}));const v=[],y=[];i(s.subscribe("_internal.chart.time.dates",t=>{const e=n.time.date().format("YYYY-MM-DD");"object"==typeof t.day&&Array.isArray(t.day)&&t.day.length&&a(v,t.day,t=>t&&{period:"day",date:t,currentDate:e},u),"object"==typeof t.month&&Array.isArray(t.month)&&t.month.length&&a(y,t.month,t=>t&&{period:"month",date:t,currentDate:e},u),r()})),i(()=>{v.forEach(t=>t.destroy()),y.forEach(t=>t.destroy())}),h.push(t=>{s.update("_internal.elements.chart-calendar",t)});const b=o.create(h,d);return n=>p(l`
        <div class=${f} data-actions=${b} style=${g}>
          <div class=${f+"-dates "+f+"-dates--months"}>${y.map(t=>t.html())}</div>
          <div class=${f+"-dates "+f+"-dates--days"}>${v.map(t=>t.html())}</div>
        </div>
      `,{props:e,vido:t,templateProps:n})}class ue{constructor(){this.isAction=!0}}ue.prototype.isAction=!0;class pe extends ue{constructor(t,e){super(),e.state.update("_internal.elements.chart-calendar-dates",e=>(void 0===e&&(e=[]),e.includes(t)||e.push(t),e))}}function fe(t,e){const{api:n,state:s,onDestroy:i,Actions:o,update:r,onChange:a,html:l,StyleMap:c,Detach:h}=t,d=n.getActions("chart-calendar-date");let u,p;i(s.subscribe("config.wrappers.ChartCalendarDate",t=>u=t)),i(s.subscribe("config.classNames",()=>{p=n.getClass("chart-calendar-date",e)}));let f,m,g="";g=n.time.date(e.date.leftGlobal).format("YYYY-MM-DD")===e.currentDate?" current":"";const v=new c({width:"","margin-left":"",visibility:"visible"}),y=new c({overflow:"hidden","text-align":"left","margin-left":e.date.subPx+8+"px"}),b=()=>{if(!e)return;f=s.get("_internal.chart.time"),v.style.width=e.date.width+"px",v.style["margin-left"]=-e.date.subPx+"px",v.style.visibility="visible",y.style={overflow:"hidden","text-align":"left","margin-left":e.date.subPx+8+"px"};const t=n.time.date(e.date.leftGlobal);g=t.format("YYYY-MM-DD")===e.currentDate?" current":t.subtract(1,"days").format("YYYY-MM-DD")===e.currentDate?" next":t.add(1,"days").format("YYYY-MM-DD")===e.currentDate?" previous":"";const i=f.maxWidth[e.period];switch(e.period){case"month":m=l`
          <div class=${p+"-content "+p+"-content--month"+g} style=${y}>
            ${t.format("MMMM YYYY")}
          </div>
        `,i<=100&&(m=l`
            <div class=${p+"-content "+p+"-content--month"+g}>
              ${t.format("MMM'YY")}
            </div>
          `);break;case"day":if(m=l`
          <div class=${p+"-content "+p+"-content--day _0"+g}>
            <div class=${p+"-content "+p+"-content--day-small"+g}>
              ${t.format("DD")} ${t.format("ddd")}
            </div>
          </div>
        `,i>=40&&i<50)m=l`
            <div class=${p+"-content "+p+"-content--day _40"+g}>
              ${t.format("DD")}
            </div>
            <div class=${p+"-content "+p+"-content--day-word"+g}>
              ${t.format("dd")}
            </div>
          `;else if(i>=50&&i<90)m=l`
            <div class=${p+"-content "+p+"-content--day _50"+g}>
              ${t.format("DD")}
            </div>
            <div class=${p+"-content "+p+"-content--day-word"+g}>
              ${t.format("ddd")}
            </div>
          `;else if(i>=90&&i<180)m=l`
            <div class=${p+"-content "+p+"-content--day _90"+g}>
              ${t.format("DD")}
            </div>
            <div class=${p+"-content "+p+"-content--day-word"+g}>
              ${t.format("dddd")}
            </div>
          `;else if(i>=180&&i<400){const e=[],n=t.startOf("day");for(let t=0;t<12;t++){const s=n.add(2*t,"hours"),i=(n.add(2*t+1,"hours").endOf("hour").valueOf()-s.valueOf())/f.timePerPixel;e.push({width:i,formatted:s.format("HH")})}m=l`
            <div class=${p+"-content "+p+"-content--day _180"+g}>
              ${t.format("DD dddd")}
            </div>
            <div class=${p+"-content "+p+"-content--hours"+g}>
              ${e.map(t=>l`
                    <div
                      class="${p+"-content "+p+"-content--hours-hour"+g}"
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(i>=400&&i<1e3){const e=[],n=t.startOf("day");for(let t=0;t<24;t++){const s=n.add(t,"hours"),i=(n.add(t,"hours").endOf("hour").valueOf()-s.valueOf())/f.timePerPixel;e.push({width:i,formatted:s.format("HH")})}m=l`
            <div class=${p+"-content "+p+"-content--day _400"+g}>
              ${t.format("DD dddd")}
            </div>
            <div class=${p+"-content "+p+"-content--hours"+g}>
              ${e.map(t=>l`
                    <div
                      class=${p+"-content "+p+"-content--hours-hour"+g}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(i>=1e3&&i<2e3){const e=[],n=t.startOf("day");for(let t=0;t<24;t++){const s=n.add(t,"hours"),i=(n.add(t,"hours").endOf("hour").valueOf()-s.valueOf())/f.timePerPixel;e.push({width:i,formatted:s.format("HH:mm")})}m=l`
            <div class=${p+"-content "+p+"-content--day _1000"+g} style=${y}>
              ${t.format("DD dddd")}
            </div>
            <div class=${p+"-content "+p+"-content--hours"+g}>
              ${e.map(t=>l`
                    <div
                      class=${p+"-content "+p+"-content--hours-hour"+g}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(i>=2e3&&i<5e3){const e=[],n=t.startOf("day");for(let t=0;t<48;t++){const s=n.add(30*t,"minutes"),i=(n.add(30*(t+1),"minutes").valueOf()-s.valueOf())/f.timePerPixel;e.push({width:i,formatted:s.format("HH:mm")})}m=l`
            <div class=${p+"-content "+p+"-content--day _2000"+g} style=${y}>
              ${t.format("DD dddd")}
            </div>
            <div class=${p+"-content "+p+"-content--hours"+g}>
              ${e.map(t=>l`
                    <div
                      class=${p+"-content "+p+"-content--hours-hour"+g}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(i>=5e3&&i<2e4){const e=[],n=t.startOf("day");for(let t=0;t<96;t++){const s=n.add(15*t,"minutes"),i=(n.add(15*(t+1),"minutes").valueOf()-s.valueOf())/f.timePerPixel;e.push({width:i,formatted:s.format("HH:mm")})}m=l`
            <div class=${p+"-content "+p+"-content--day _5000"+g} style=${y}>
              ${t.format("DD dddd")}
            </div>
            <div class=${p+"-content "+p+"-content--hours"+g}>
              ${e.map(t=>l`
                    <div
                      class=${p+"-content "+p+"-content--hours-hour"+g}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}else if(i>=2e4){const e=[],n=t.startOf("day");for(let t=0;t<288;t++){const s=n.add(5*t,"minutes"),i=(n.add(5*(t+1),"minutes").valueOf()-s.valueOf())/f.timePerPixel;e.push({width:i,formatted:s.format("HH:mm")})}m=l`
            <div
              class=${p+"-content "+p+"-content--day _20000"+g}
              style=${y}
            >
              ${t.format("DD dddd")}
            </div>
            <div class=${p+"-content "+p+"-content--hours"+g}>
              ${e.map(t=>l`
                    <div
                      class=${p+"-content "+p+"-content--hours-hour"+g}
                      style="width: ${t.width}px"
                    >
                      ${t.formatted}
                    </div>
                  `)}
            </div>
          `}}r()};let w=!1;const _=new h(()=>w);let x;const $={date:e.date,period:e.period,api:n,state:s};a((t,n)=>{if(n.leave)return w=!0,r();w=!1,e=t,$.date=e.date,$.period=e.period,x&&x(),x=s.subscribeAll(["_internal.chart.time","config.chart.calendar.vertical.smallFormat"],b,{bulk:!0})}),i(()=>{x()}),d.includes(pe)||d.push(pe);const M=o.create(d,$);return n=>u(l`
        <div
          detach=${_}
          class=${p+" "+p+"--"+e.period+g}
          style=${v}
          data-actions=${M}
        >
          ${m}
        </div>
      `,{props:e,vido:t,templateProps:n})}function me(t,e){const{api:n,state:s,onDestroy:i,Action:o,Actions:r,update:a,html:l,createComponent:c,StyleMap:h}=t,d=n.getActions("chart-timeline"),u=Object.assign(Object.assign({},e),{api:n,state:s});let p;i(s.subscribe("config.wrappers.ChartTimeline",t=>p=t));const f=s.get("config.components.ChartTimelineGrid"),m=s.get("config.components.ChartTimelineItems"),g=s.get("config.components.ListToggle"),v=c(f);i(v.destroy);const y=c(m);i(y.destroy);const b=c(g);let w,_,x;i(b.destroy),i(s.subscribe("config.classNames",()=>{w=n.getClass("chart-timeline"),_=n.getClass("chart-timeline-inner"),a()})),i(s.subscribe("config.list.toggle.display",t=>x=t));const $=new h({}),M=new h({});i(s.subscribeAll(["_internal.height","_internal.chart.dimensions.width","_internal.list.rowsHeight","config.scroll.compensation","_internal.chart.time.dates.day"],(function(){const t=n.getCompensationX(),e=n.getCompensationY(),i=s.get("_internal.chart.dimensions.width"),o=s.get("_internal.list.rowsHeight");$.style.height=s.get("_internal.height")+"px",$.style["--height"]=$.style.height,$.style["--negative-compensation-x"]=t+"px",$.style["--compensation-x"]=Math.round(Math.abs(t))+"px",$.style["--negative-compensation-y"]=e+"px",$.style["--compensation-y"]=Math.abs(e)+"px",i?($.style.width=i+"px",$.style["--width"]=i+"px"):($.style.width="0px",$.style["--width"]="0px"),M.style.height=o+"px",M.style.width=i?i+t+"px":"0px",M.style.transform=`translate(-${t}px, ${e}px)`,a()}))),d.push(class extends o{constructor(t){super(),s.get("_internal.elements.chart-timeline")!==t&&s.update("_internal.elements.chart-timeline",t)}});const C=r.create(d,u);return s=>p(l`
        <div class=${w} style=${$} data-actions=${C} @wheel=${n.onScroll}>
          <div class=${_} style=${M}>
            ${v.html()}${y.html()}${x?b.html():""}
          </div>
        </div>
      `,{props:e,vido:t,templateProps:s})}class ge{constructor(t,e){e.state.get("_internal.elements.chart-timeline-grid")!==t&&e.state.update("_internal.elements.chart-timeline-grid",t)}destroy(t,e){e.state.update("_internal.elements",t=>(delete t["chart-timeline-grid"],t))}}function ve(t,e){const{api:n,state:s,onDestroy:i,Actions:o,update:r,html:a,reuseComponents:l,StyleMap:c}=t,h=n.getActions("chart-timeline-grid"),d={api:n,state:s};let u;i(s.subscribe("config.wrappers.ChartTimelineGrid",t=>u=t));const p=s.get("config.components.ChartTimelineGridRow");let f,m,g;i(s.subscribe("config.classNames",()=>{f=n.getClass("chart-timeline-grid"),r()})),i(s.subscribe("config.chart.time.period",t=>m=t)),i(s.subscribe("config.chart.grid.block.onCreate",t=>g=t));const v=[],y=[],b=new Map,w=new c({});i(s.subscribeAll(["_internal.list.visibleRows;",`_internal.chart.time.dates.${m};`,"_internal.height","_internal.chart.dimensions.width"],(function(){const t=s.get("_internal.chart.dimensions.width"),e=s.get("_internal.height"),i=s.get(`_internal.chart.time.dates.${m}`);if(!i||0===i.length)return void s.update("_internal.chart.grid.rowsWithBlocks",[]);const o=s.get("_internal.list.visibleRows"),r=n.getCompensationX(),a=n.getCompensationY();w.style.height=e+Math.abs(a)+"px",w.style.width=t+r+"px";let l=0;y.length=0;for(const e of o){const s=[];for(const t of i){let i;b.has(t.leftGlobal)?i=b.get(t.leftGlobal):(i=n.time.date(t.leftGlobal).format("YYYY-MM-DD"),b.set(t.leftGlobal,i));let o={id:e.id+":"+i,time:t,row:e,top:l};for(const t of g)o=t(o);s.push(o)}y.push({row:e,blocks:s,top:l,width:t}),l+=e.height}s.update("_internal.chart.grid.rowsWithBlocks",y)}),{bulk:!0}));i(s.subscribe("_internal.chart.grid.rowsWithBlocks",t=>{l(v,t||[],t=>t,p),r()})),i(()=>{v.forEach(t=>t.destroy())}),h.push(ge);const _=o.create(h,d);return n=>u(a`
        <div class=${f} data-actions=${_} style=${w}>
          ${v.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class ye{constructor(t,e){let n=!1,s=e.state.get("_internal.elements.chart-timeline-grid-rows");void 0===s&&(s=[],n=!0),s.includes(t)||(s.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-grid-rows",s,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-grid-rows",e=>e.filter(e=>e!==t))}}function be(t,e){const{api:n,state:s,onDestroy:i,Detach:o,Actions:r,update:a,html:l,reuseComponents:c,onChange:h,StyleMap:d}=t,u=Object.assign(Object.assign({},e),{api:n,state:s});let p;i(s.subscribe("config.wrappers.ChartTimelineGridRow",t=>{p=t,a()}));const f=s.get("config.components.ChartTimelineGridRowBlock"),m=n.getActions("chart-timeline-grid-row");let g;i(s.subscribe("config.classNames",()=>{g=n.getClass("chart-timeline-grid-row")}));const v=new d({width:e.width+"px",height:e.row.height+"px",overflow:"hidden"},!0);let y=!1;const b=new o(()=>y),w=[];h((function(t,n){var i,o,r,l,h,d,p,m,g;if(n.leave||void 0===t.row)return y=!0,c(w,[],t=>t,f),void a();y=!1,c(w,(e=t).blocks,t=>t,f),v.setStyle({}),v.style.height=e.row.height+"px",v.style.width=e.width+"px";const b=s.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(l=null===(r=null===(o=null===(i=b[t])||void 0===i?void 0:i.style)||void 0===o?void 0:o.grid)||void 0===r?void 0:r.row)||void 0===l?void 0:l.children;if(e)for(const t in e)v.style[t]=e[t]}const _=null===(g=null===(m=null===(p=null===(d=null===(h=e)||void 0===h?void 0:h.row)||void 0===d?void 0:d.style)||void 0===p?void 0:p.grid)||void 0===m?void 0:m.row)||void 0===g?void 0:g.current;if(_)for(const t in _)v.style[t]=_[t];for(const t in e)u[t]=e[t];a()})),i((function(){w.forEach(t=>t.destroy())})),-1===m.indexOf(ye)&&m.push(ye);const _=r.create(m,u);return n=>p(l`
        <div detach=${b} class=${g} data-actions=${_} style=${v}>
          ${w.map(t=>t.html())}
        </div>
      `,{vido:t,props:e,templateProps:n})}class we{constructor(t,e){let n=!1,s=e.state.get("_internal.elements.chart-timeline-grid-row-blocks");void 0===s&&(s=[],n=!0),s.includes(t)||(s.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-grid-row-blocks",s,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-grid-row-blocks",e=>e.filter(e=>e!==t),{only:[""]})}}const _e=(t,e)=>{const{api:n,state:s,onDestroy:i,Detach:o,Actions:r,update:a,html:l,onChange:c,StyleMap:h}=t,d=Object.assign(Object.assign({},e),{api:n,state:s});let u=!1;const p=new o(()=>u),f=n.getActions("chart-timeline-grid-row-block");let m;i(s.subscribe("config.wrappers.ChartTimelineGridRowBlock",t=>{m=t,a()}));const g=n.time.date().startOf("day").valueOf();let v;function y(t){v=n.getClass("chart-timeline-grid-row-block"),t.leftGlobal===g&&(v+=" current")}y(e.time);const b=new h({width:"",height:""});c((function(t,n){var i,o,r,l,c,h,p,f,m,g,v,w,_;if(n.leave||void 0===t.row)return u=!0,a();u=!1,e=t;for(const t in e)d[t]=e[t];y(e.time),b.setStyle({}),b.style.width=((null===(o=null===(i=e)||void 0===i?void 0:i.time)||void 0===o?void 0:o.width)||0)+"px",b.style.height=((null===(l=null===(r=e)||void 0===r?void 0:r.row)||void 0===l?void 0:l.height)||0)+"px";const x=s.get("config.list.rows");for(const t of e.row._internal.parents){const e=null===(f=null===(p=null===(h=null===(c=x[t])||void 0===c?void 0:c.style)||void 0===h?void 0:h.grid)||void 0===p?void 0:p.block)||void 0===f?void 0:f.children;e&&b.setStyle(Object.assign(Object.assign({},b.style),e))}const $=null===(_=null===(w=null===(v=null===(g=null===(m=e)||void 0===m?void 0:m.row)||void 0===g?void 0:g.style)||void 0===v?void 0:v.grid)||void 0===w?void 0:w.block)||void 0===_?void 0:_.current;$&&b.setStyle(Object.assign(Object.assign({},b.style),$)),a()})),f.push(we);const w=r.create(f,d);return n=>m(l`
        <div detach=${p} class=${v} data-actions=${w} style=${b}></div>
      `,{props:e,vido:t,templateProps:n})};function xe(t,e={}){const{api:n,state:s,onDestroy:i,Actions:o,update:r,html:a,reuseComponents:l,StyleMap:c}=t,h=n.getActions("chart-timeline-items");let d,u,p;i(s.subscribe("config.wrappers.ChartTimelineItems",t=>d=t)),i(s.subscribe("config.components.ChartTimelineItemsRow",t=>u=t)),i(s.subscribe("config.classNames",()=>{p=n.getClass("chart-timeline-items"),r()}));const f=new c({},!0);i(s.subscribeAll(["_internal.height","_internal.chart.dimensions.width","config.scroll.compensation","_internal.chart.time.dates.day"],(function(){const t=s.get("_internal.chart.dimensions.width"),e=s.get("_internal.height"),i=n.getCompensationY(),o=n.getCompensationX();f.style.width=t+o+"px",f.style.height=e+Math.abs(i)+"px"})));const m=[];i(s.subscribeAll(["_internal.list.visibleRows;","config.chart.items"],(function(){const t=s.get("_internal.list.visibleRows");l(m,t||[],t=>({row:t}),u),r()}))),i(()=>{m.forEach(t=>t.destroy())});const g=o.create(h,{api:n,state:s});return n=>d(a`
        <div class=${p} style=${f} data-actions=${g}>
          ${m.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})}class $e{constructor(t,e){let n=!1,s=e.state.get("_internal.elements.chart-timeline-items-rows");void 0===s&&(s=[],n=!0),s.includes(t)||(s.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-items-rows",s,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-items-rows",e=>e.filter(e=>e!==t))}}const Me=(t,e)=>{const{api:n,state:s,onDestroy:i,Detach:o,Actions:r,update:a,html:l,onChange:c,reuseComponents:h,StyleMap:d}=t,u=Object.assign(Object.assign({},e),{api:n,state:s});let p,f;i(s.subscribe("config.wrappers.ChartTimelineItemsRow",t=>p=t)),i(s.subscribe("config.components.ChartTimelineItemsRowItem",t=>f=t));let m,g,v=`_internal.flatTreeMapById.${e.row.id}._internal.items`;const y=[],b=new d({width:"",height:""},!0);let w=!1;const _=new o(()=>w),x=()=>{const t=s.get("_internal.chart");w=!1;const i=n.getCompensationX();b.style.width=t.dimensions.width+i+"px",e?(b.style.height=e.row.height+"px",b.style["--row-height"]=e.row.height+"px"):w=!0};c((t,n)=>{if(n.leave||void 0===t.row)return w=!0,a();e=t;for(const t in e)u[t]=e[t];var i;i=e.row,v=`_internal.flatTreeMapById.${i.id}._internal.items`,"function"==typeof m&&m(),"function"==typeof g&&g(),m=s.subscribe("_internal.chart",t=>{if(void 0===t)return w=!0,a();x(),a()}),g=s.subscribe(v,t=>{if(void 0===t)return w=!0,h(y,[],t=>({row:i,item:t}),f),a();h(y,t,t=>({row:i,item:t}),f),x(),a()})}),i(()=>{g(),m(),y.forEach(t=>t.destroy())});const $=n.getActions("chart-timeline-items-row");let M;i(s.subscribe("config.classNames",()=>{M=n.getClass("chart-timeline-items-row",e),a()})),$.push($e);const C=r.create($,u);return n=>p(l`
        <div detach=${_} class=${M} data-actions=${C} style=${b}>
          ${y.map(t=>t.html())}
        </div>
      `,{props:e,vido:t,templateProps:n})};class Ce{constructor(t,e){let n=!1,s=e.state.get("_internal.elements.chart-timeline-items-row-items");void 0===s&&(s=[],n=!0),s.includes(t)||(s.push(t),n=!0),n&&e.state.update("_internal.elements.chart-timeline-items-row-items",s,{only:null})}destroy(t,e){e.state.update("_internal.elements.chart-timeline-items-row-items",e=>e.filter(e=>e!==t))}}function Pe(t,e){const{api:n,state:s,onDestroy:i,Detach:o,Actions:r,update:a,html:l,onChange:c,unsafeHTML:h,StyleMap:d}=t;let u;i(s.subscribe("config.wrappers.ChartTimelineItemsRowItem",t=>u=t));let p=0,f=0,m=!1,g=!1,v=!1;const y=new d({width:"",height:"",left:""}),b=new d({"margin-left":"0px"}),w=new d({"margin-right":"0px"}),_={item:e.item,row:e.row,left:p,width:f,api:n,state:s};let x=!1;function $(){var t,i,o,r,l,c,h,d,u,$,M;if(m)return;const C=s.get("_internal.chart.time");p=n.time.globalTimeToViewPixelOffset(e.item.time.start),p=.1*Math.round(10*p),f=(e.item.time.end-e.item.time.start)/C.timePerPixel,f-=s.get("config.chart.spacing")||0,f&&(f=.1*Math.round(10*f)),e.item.time.start<C.leftGlobal?(b.style["margin-left"]=(C.leftGlobal-e.item.time.start)/C.timePerPixel+"px",g=!0):(b.style["margin-left"]="0px",g=!1),e.item.time.end>C.rightGlobal?(w.style["margin-right"]=(e.item.time.end-C.rightGlobal)/C.timePerPixel+"px",v=!0):(v=!1,w.style["margin-right"]="0px");const P=y.style.width,O=y.style.left,T=n.getCompensationX();y.setStyle({});const A=n.isItemInViewport(e.item,C.leftGlobal,C.rightGlobal);x=!A,A?(y.style.width=f+"px",y.style.left=p+T+"px"):(y.style.width=P,y.style.left=O);const S=s.get("config.list.rows");for(const n of e.row._internal.parents){const e=null===(r=null===(o=null===(i=null===(t=S[n])||void 0===t?void 0:t.style)||void 0===i?void 0:i.items)||void 0===o?void 0:o.item)||void 0===r?void 0:r.children;e&&y.setStyle(Object.assign(Object.assign({},y.style),e))}const D=null===(u=null===(d=null===(h=null===(c=null===(l=e)||void 0===l?void 0:l.row)||void 0===c?void 0:c.style)||void 0===h?void 0:h.items)||void 0===d?void 0:d.item)||void 0===u?void 0:u.current;D&&y.setStyle(Object.assign(Object.assign({},y.style),D));const I=null===(M=null===($=e)||void 0===$?void 0:$.item)||void 0===M?void 0:M.style;I&&y.setStyle(Object.assign(Object.assign({},y.style),I)),_.left=p+T,_.width=f,a()}const M="chart-timeline-items-row-item",C=n.getClass(M)+"-cut",P=l`
    <div class=${C} style=${b}>
      <svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 18 16" width="16">
        <path fill-opacity="0.5" fill="#ffffff" d="m5,3l-5,5l5,5l0,-10z" />
      </svg>
    </div>
  `,O=l`
    <div class=${C} style=${w}>
      <svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 4 16" width="16">
        <path transform="rotate(-180 2.5,8) " fill-opacity="0.5" fill="#ffffff" d="m5,3l-5,5l5,5l0,-10z" />
      </svg>
    </div>
  `;c((function(t,n){if(n.leave||void 0===t.row||void 0===t.item)return m=!0,x=!0,a();x=!1,m=!1,e=t,_.item=e.item,_.row=e.row,$()}));const T=n.getActions(M);let A,S;i(s.subscribe("config.classNames",()=>{A=n.getClass(M,e),S=n.getClass(M+"-label",e),a()})),i(s.subscribeAll(["_internal.chart.time","config.scroll.compensation.x"],$)),T.push(Ce);const D=r.create(T,_),I=new o(()=>x);return n=>u(l`
        <div detach=${I} class=${A} data-actions=${D} style=${y}>
          ${g?P:""}
          <div class=${S}>
            ${e.item.isHtml?h(e.item.label):e.item.label}
          </div>
          ${v?O:""}
        </div>
      `,{vido:t,props:e,templateProps:n})}const Oe=["main","list","list-column","list-column-header","list-column-header-resizer","list-column-header-resizer-dots","list-column-row","list-column-row-expander","list-column-row-expander-toggle","list-toggle","chart","chart-calendar","chart-calendar-date","chart-timeline","chart-timeline-grid","chart-timeline-grid-row","chart-timeline-grid-row-block","chart-timeline-items","chart-timeline-items-row","chart-timeline-items-row-item"];function Te(){const t=function(){const t={};return Oe.forEach(e=>t[e]=[]),t}(),e=function(){const t={};return Oe.forEach(e=>{t[e]={before:[],after:[]}}),t}();return{plugins:[],plugin:{},height:822,headerHeight:86,components:{Main:Qt,List:te,ListColumn:ne,ListColumnHeader:se,ListColumnHeaderResizer:ie,ListColumnRow:re,ListColumnRowExpander:ae,ListColumnRowExpanderToggle:le,ListToggle:ce,Chart:he,ChartCalendar:de,ChartCalendarDate:fe,ChartTimeline:me,ChartTimelineGrid:ve,ChartTimelineGridRow:be,ChartTimelineGridRowBlock:_e,ChartTimelineItems:xe,ChartTimelineItemsRow:Me,ChartTimelineItemsRowItem:Pe},wrappers:{Main:t=>t,List:t=>t,ListColumn:t=>t,ListColumnHeader:t=>t,ListColumnHeaderResizer:t=>t,ListColumnRow:t=>t,ListColumnRowExpander:t=>t,ListColumnRowExpanderToggle:t=>t,ListToggle:t=>t,Chart:t=>t,ChartCalendar:t=>t,ChartCalendarDate:t=>t,ChartTimeline:t=>t,ChartTimelineGrid:t=>t,ChartTimelineGridRow:t=>t,ChartTimelineGridRowBlock:t=>t,ChartTimelineItems:t=>t,ChartTimelineItemsRow:t=>t,ChartTimelineItemsRowItem:t=>t},list:{rows:{},rowHeight:40,columns:{percent:100,resizer:{width:10,inRealTime:!0,dots:6},minWidth:50,data:{}},expander:{padding:18,size:20,icon:{width:16,height:16},icons:{child:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><ellipse ry="4" rx="4" id="svg_1" cy="12" cx="12" fill="#000000B0"/></svg>',open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',closed:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>'}},toggle:{display:!0,icons:{open:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path stroke="null" d="m16.406954,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m-0.343497,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path transform="rotate(-180 4.392796516418457,12) " stroke="null" d="m1.153809,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z"/><path stroke="null" d="m9.773297,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z"/></svg>'}}},scroll:{smooth:!1,top:0,left:0,xMultiplier:3,yMultiplier:3,percent:{top:0,left:0},compensation:{x:0,y:0}},chart:{time:{from:0,to:0,zoom:21,period:"day",dates:{},maxWidth:{}},calendar:{vertical:{smallFormat:"YYYY-MM-DD"}},grid:{block:{onCreate:[]}},items:{},spacing:1},slots:e,classNames:{},actions:t,locale:{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:t=>{const e=["th","st","nd","rd"],n=t%100;return`[${t}${e[(n-20)%10]||e[n]||e[0]}]`}},utcMode:!1,usageStatistics:!0}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Ae(t,e){return t(e={exports:{}},e.exports),e.exports}var Se=Ae((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",s="hour",i="day",o="week",r="month",a="quarter",l="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},u={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+d(s,2,"0")+":"+d(i,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(n,r),i=e-s<0,o=t.clone().add(n+(i?-1:1),r);return Number(-(n+(e-s)/(i?s-o:o-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:r,y:l,w:o,d:i,h:s,m:n,s:e,ms:t,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f="en",m={};m[f]=p;var g=function(t){return t instanceof w},v=function(t,e,n){var s;if(!t)return f;if("string"==typeof t)m[t]&&(s=t),e&&(m[t]=e,s=t);else{var i=t.name;m[i]=t,s=i}return n||(f=s),s},y=function(t,e,n){if(g(t))return t.clone();var s=e?"string"==typeof e?{format:e,pl:n}:e:{};return s.date=t,new w(s)},b=u;b.l=v,b.i=g,b.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var w=function(){function d(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var u=d.prototype;return u.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(c);if(s)return n?new Date(Date.UTC(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)):new Date(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)}return new Date(e)}(t),this.init()},u.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},u.$utils=function(){return b},u.isValid=function(){return!("Invalid Date"===this.$d.toString())},u.isSame=function(t,e){var n=y(t);return this.startOf(e)<=n&&n<=this.endOf(e)},u.isAfter=function(t,e){return y(t)<this.startOf(e)},u.isBefore=function(t,e){return this.endOf(e)<y(t)},u.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},u.year=function(t){return this.$g(t,"$y",l)},u.month=function(t){return this.$g(t,"$M",r)},u.day=function(t){return this.$g(t,"$W",i)},u.date=function(t){return this.$g(t,"$D","date")},u.hour=function(t){return this.$g(t,"$H",s)},u.minute=function(t){return this.$g(t,"$m",n)},u.second=function(t){return this.$g(t,"$s",e)},u.millisecond=function(e){return this.$g(e,"$ms",t)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(t,a){var c=this,h=!!b.u(a)||a,d=b.p(t),u=function(t,e){var n=b.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return h?n:n.endOf(i)},p=function(t,e){return b.w(c.toDate()[t].apply(c.toDate(),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},f=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case l:return h?u(1,0):u(31,11);case r:return h?u(1,m):u(0,m+1);case o:var y=this.$locale().weekStart||0,w=(f<y?f+7:f)-y;return u(h?g-w:g+(6-w),m);case i:case"date":return p(v+"Hours",0);case s:return p(v+"Minutes",1);case n:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},u.endOf=function(t){return this.startOf(t,!1)},u.$set=function(o,a){var c,h=b.p(o),d="set"+(this.$u?"UTC":""),u=(c={},c[i]=d+"Date",c.date=d+"Date",c[r]=d+"Month",c[l]=d+"FullYear",c[s]=d+"Hours",c[n]=d+"Minutes",c[e]=d+"Seconds",c[t]=d+"Milliseconds",c)[h],p=h===i?this.$D+(a-this.$W):a;if(h===r||h===l){var f=this.clone().set("date",1);f.$d[u](p),f.init(),this.$d=f.set("date",Math.min(this.$D,f.daysInMonth())).toDate()}else u&&this.$d[u](p);return this.init(),this},u.set=function(t,e){return this.clone().$set(t,e)},u.get=function(t){return this[b.p(t)]()},u.add=function(t,a){var c,h=this;t=Number(t);var d=b.p(a),u=function(e){var n=y(h);return b.w(n.date(n.date()+Math.round(e*t)),h)};if(d===r)return this.set(r,this.$M+t);if(d===l)return this.set(l,this.$y+t);if(d===i)return u(1);if(d===o)return u(7);var p=(c={},c[n]=6e4,c[s]=36e5,c[e]=1e3,c)[d]||1,f=this.$d.getTime()+t*p;return b.w(f,this)},u.subtract=function(t,e){return this.add(-1*t,e)},u.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=b.z(this),i=this.$locale(),o=this.$H,r=this.$m,a=this.$M,l=i.weekdays,c=i.months,d=function(t,s,i,o){return t&&(t[s]||t(e,n))||i[s].substr(0,o)},u=function(t){return b.s(o%12||12,t,"0")},p=i.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:d(i.monthsShort,a,c,3),MMMM:c[a]||c(this,n),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:d(i.weekdaysMin,this.$W,l,2),ddd:d(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:b.s(o,2,"0"),h:u(1),hh:u(2),a:p(o,r,!0),A:p(o,r,!1),m:String(r),mm:b.s(r,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:s};return n.replace(h,(function(t,e){return e||f[t]||s.replace(":","")}))},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(t,c,h){var d,u=b.p(c),p=y(t),f=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=b.m(this,p);return g=(d={},d[l]=g/12,d[r]=g,d[a]=g/3,d[o]=(m-f)/6048e5,d[i]=(m-f)/864e5,d[s]=m/36e5,d[n]=m/6e4,d[e]=m/1e3,d)[u]||m,h?g:b.a(g)},u.daysInMonth=function(){return this.endOf(r).$D},u.$locale=function(){return m[this.$L]},u.locale=function(t,e){if(!t)return this.$L;var n=this.clone();return n.$L=v(t,e,!0),n},u.clone=function(){return b.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},d}();return y.prototype=w.prototype,y.extend=function(t,e){return t(e,w,y),y},y.locale=v,y.isDayjs=g,y.unix=function(t){return y(1e3*t)},y.en=m[f],y.Ls=m,y}()})),De=Ae((function(t,e){t.exports=function(t,e,n){var s=(new Date).getTimezoneOffset(),i=e.prototype;n.utc=function(t,n){return new e({date:t,utc:!0,format:n})},i.utc=function(){return n(this.toDate(),{locale:this.$L,utc:!0})},i.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=i.parse;i.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var r=i.init;i.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var a=i.utcOffset;i.utcOffset=function(t){var e=this.$utils().u;if(e(t))return this.$u?0:e(this.$offset)?a.call(this):this.$offset;var n,i=Math.abs(t)<=16?60*t:t;return 0!==t?(n=this.local().add(i+s,"minute")).$offset=i:n=this.utc(),n};var l=i.format;i.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},i.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+s;return this.$d.valueOf()-6e4*t},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()}}}));class Ie{constructor(t){this.utcMode=!1,this.state=t,this.locale=t.get("config.locale"),this.utcMode=t.get("config.utcMode"),this.utcMode&&Se.extend(De),Se.locale(this.locale,null,!0)}date(t){const e=this.utcMode?Se.utc:Se;return t?e(t).locale(this.locale.name):e().locale(this.locale.name)}recalculateFromTo(t){0!==(t=Object.assign({},t)).from&&(t.from=this.date(t.from).startOf("day").valueOf()),0!==t.to&&(t.to=this.date(t.to).endOf("day").valueOf());let e=Number.MAX_SAFE_INTEGER,n=0;const s=this.state.get("config.chart.items");if(0===Object.keys(s).length)return t;if(0===t.from||0===t.to){for(const t in s){const i=s[t];e>i.time.start&&(e=i.time.start),n<i.time.end&&(n=i.time.end)}0===t.from&&(t.from=this.date(e).startOf("day").valueOf()),0===t.to&&(t.to=this.date(n).endOf("day").valueOf())}return t}timeToPixelOffset(t){return t/(this.state.get("_internal.chart.time.timePerPixel")||1)}globalTimeToViewPixelOffset(t,e=!1){const n=this.state.get("_internal.chart.time");let s=this.state.get("config.scroll.compensation.x")||0;const i=(t-n.leftGlobal)/n.timePerPixel;return e?i+s:i}}function Le(t,e="*"){this.wchar=e,this.pattern=t,this.segments=[],this.starCount=0,this.minLength=0,this.maxLength=0,this.segStartIndex=0;for(let n=0,s=t.length;n<s;n+=1){const s=t[n];s===e&&(this.starCount+=1,n>this.segStartIndex&&this.segments.push(t.substring(this.segStartIndex,n)),this.segments.push(s),this.segStartIndex=n+1)}this.segStartIndex<t.length&&this.segments.push(t.substring(this.segStartIndex)),this.starCount?(this.minLength=t.length-this.starCount,this.maxLength=1/0):this.maxLength=this.minLength=t.length}function Ee(t,e,n){this.obj=t,this.delimeter=e,this.wildcard=n}Le.prototype.match=function(t){if(this.pattern===this.wchar)return!0;if(0===this.segments.length)return this.pattern===t;const{length:e}=t;if(e<this.minLength||e>this.maxLength)return!1;let n=this.segments.length-1,s=t.length-1,i=!1;for(;;){const e=this.segments[n];if(n-=1,e===this.wchar)i=!0;else{const n=s+1-e.length,o=t.lastIndexOf(e,n);if(-1===o||o>n)return!1;if(i)s=o-1,i=!1;else{if(o!==n)return!1;s-=e.length}}if(0>n)break}return!0},Ee.prototype.simpleMatch=function(t,e){if(t===e)return!0;if(t===this.wildcard)return!0;const n=t.indexOf(this.wildcard);if(n>-1){const s=t.substr(n+1);if(0===n||e.substring(0,n)===t.substring(0,n)){const t=s.length;return!(t>0)||e.substr(-t)===s}}return!1},Ee.prototype.match=function(t,e){return t===e||t===this.wildcard||e===this.wildcard||this.simpleMatch(t,e)||new Le(t).match(e)},Ee.prototype.handleArray=function(t,e,n,s,i={}){let o=t.indexOf(this.delimeter,n),r=!1;-1===o&&(r=!0,o=t.length);const a=t.substring(n,o);let l=0;for(const n of e){const e=l.toString(),c=""===s?e:s+this.delimeter+l;(a===this.wildcard||a===e||this.simpleMatch(a,e))&&(r?i[c]=n:this.goFurther(t,n,o+1,c,i)),l++}return i},Ee.prototype.handleObject=function(t,e,n,s,i={}){let o=t.indexOf(this.delimeter,n),r=!1;-1===o&&(r=!0,o=t.length);const a=t.substring(n,o);for(let n in e){n=n.toString();const l=""===s?n:s+this.delimeter+n;(a===this.wildcard||a===n||this.simpleMatch(a,n))&&(r?i[l]=e[n]:this.goFurther(t,e[n],o+1,l,i))}return i},Ee.prototype.goFurther=function(t,e,n,s,i={}){return Array.isArray(e)?this.handleArray(t,e,n,s,i):this.handleObject(t,e,n,s,i)},Ee.prototype.get=function(t){return this.goFurther(t,this.obj,0,"")};class Ye{static get(t,e,n=null){if(null===n&&(n=t.slice()),0===n.length||void 0===e)return e;const s=n.shift();return e.hasOwnProperty(s)?0===n.length?e[s]:Ye.get(t,e[s],n):void 0}static set(t,e,n,s=null){if(null===s&&(s=t.slice()),0===s.length){for(const t in n)delete n[t];for(const t in e)n[t]=e[t];return}const i=s.shift();0!==s.length?(n||(n={}),n.hasOwnProperty(i)||(n[i]={}),Ye.set(t,e,n[i],s)):n[i]=e}}const Ne={delimeter:".",notRecursive:";",param:":",wildcard:"*",log:function(t,e){console.debug(t,e)}},ke={bulk:!1,debug:!1,source:"",data:void 0},Re={only:[],source:"",debug:!1,data:void 0};class He{constructor(t={},e=Ne){this.listeners=new Map,this.waitingListeners=new Map,this.data=t,this.options=Object.assign(Object.assign({},Ne),e),this.id=0,this.pathGet=Ye.get,this.pathSet=Ye.set,this.scan=new Ee(this.data,this.options.delimeter,this.options.wildcard)}getListeners(){return this.listeners}destroy(){this.data=void 0,this.listeners=new Map}match(t,e){return t===e||(t===this.options.wildcard||e===this.options.wildcard||this.scan.match(t,e))}getIndicesOf(t,e){const n=t.length;if(0==n)return[];let s,i=0,o=[];for(;(s=e.indexOf(t,i))>-1;)o.push(s),i=s+n;return o}getIndicesCount(t,e){const n=t.length;if(0==n)return 0;let s,i=0,o=0;for(;(s=e.indexOf(t,i))>-1;)o++,i=s+n;return o}cutPath(t,e){t=this.cleanNotRecursivePath(t),e=this.cleanNotRecursivePath(e);const n=this.getIndicesCount(this.options.delimeter,e),s=this.getIndicesOf(this.options.delimeter,t);return t.substr(0,s[n])}trimPath(t){return(t=this.cleanNotRecursivePath(t)).charAt(0)===this.options.delimeter?t.substr(1):t}split(t){return""===t?[]:t.split(this.options.delimeter)}isWildcard(t){return t.includes(this.options.wildcard)}isNotRecursive(t){return t.endsWith(this.options.notRecursive)}cleanNotRecursivePath(t){return this.isNotRecursive(t)?t.substring(0,t.length-1):t}hasParams(t){return t.includes(this.options.param)}getParamsInfo(t){let e={replaced:"",original:t,params:{}},n=0,s=[];for(const i of this.split(t)){e.params[n]={original:i,replaced:"",name:""};const t=new RegExp(`\\${this.options.param}([^\\${this.options.delimeter}\\${this.options.param}]+)`,"g");let o=t.exec(i);o?(e.params[n].name=o[1],t.lastIndex=0,e.params[n].replaced=i.replace(t,this.options.wildcard),s.push(e.params[n].replaced),n++):(delete e.params[n],s.push(i),n++)}return e.replaced=s.join(this.options.delimeter),e}getParams(t,e){if(!t)return;const n=this.split(e),s={};for(const e in t.params){s[t.params[e].name]=n[e]}return s}waitForAll(t,e){const n={};for(let e of t)n[e]={dirty:!1},this.hasParams(e)&&(n[e].paramsInfo=this.getParamsInfo(e)),n[e].isWildcard=this.isWildcard(e),n[e].isRecursive=!this.isNotRecursive(e);return this.waitingListeners.set(t,{fn:e,paths:n}),e(n),function(){this.waitingListeners.delete(t)}}executeWaitingListeners(t){for(const e of this.waitingListeners.values()){const{fn:n,paths:s}=e;let i=0,o=0;for(let e in s){const n=s[e];let r=!1;n.isRecursive&&(t=this.cutPath(t,e)),n.isWildcard&&this.match(e,t)&&(r=!0),t===e&&(r=!0),r&&(n.dirty=!0),n.dirty&&i++,o++}i===o&&n(s)}}subscribeAll(t,e,n=ke){let s=[];for(const i of t)s.push(this.subscribe(i,e,n));return function(){for(const t of s)t()}}getCleanListenersCollection(t={}){return Object.assign({listeners:new Map,isRecursive:!1,isWildcard:!1,hasParams:!1,match:void 0,paramsInfo:void 0,path:void 0,count:0},t)}getCleanListener(t,e=ke){return{fn:t,options:Object.assign(Object.assign({},ke),e)}}getListenerCollectionMatch(t,e,n){t=this.cleanNotRecursivePath(t);const s=this;return function(i){return e&&(i=s.cutPath(i,t)),!(!n||!s.match(t,i))||t===i}}getListenersCollection(t,e){if(this.listeners.has(t)){let n=this.listeners.get(t);return n.listeners.set(++this.id,e),n}let n={isRecursive:!0,isWildcard:!1,hasParams:!1,paramsInfo:void 0,originalPath:t,path:t};this.hasParams(n.path)&&(n.paramsInfo=this.getParamsInfo(n.path),n.path=n.paramsInfo.replaced,n.hasParams=!0),n.isWildcard=this.isWildcard(n.path),this.isNotRecursive(n.path)&&(n.isRecursive=!1);let s=this.getCleanListenersCollection(Object.assign(Object.assign({},n),{match:this.getListenerCollectionMatch(n.path,n.isRecursive,n.isWildcard)}));return this.id++,s.listeners.set(this.id,e),this.listeners.set(n.path,s),s}subscribe(t,e,n=ke,s="subscribe"){let i=this.getCleanListener(e,n);const o=this.getListenersCollection(t,i);if(o.count++,t=o.path,o.isWildcard){const r=this.scan.get(this.cleanNotRecursivePath(t));if(n.bulk){const a=[];for(const t in r)a.push({path:t,params:this.getParams(o.paramsInfo,t),value:r[t]});e(a,{type:s,listener:i,listenersCollection:o,path:{listener:t,update:void 0,resolved:void 0},options:n,params:void 0})}else for(const a in r)e(r[a],{type:s,listener:i,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(a)},params:this.getParams(o.paramsInfo,a),options:n})}else e(this.pathGet(this.split(this.cleanNotRecursivePath(t)),this.data),{type:s,listener:i,listenersCollection:o,path:{listener:t,update:void 0,resolved:this.cleanNotRecursivePath(t)},params:this.getParams(o.paramsInfo,t),options:n});return this.debugSubscribe(i,o,t),this.unsubscribe(t,this.id)}unsubscribe(t,e){const n=this.listeners,s=n.get(t);return function(){s.listeners.delete(e),s.count--,0===s.count&&n.delete(t)}}same(t,e){return(["number","string","undefined","boolean"].includes(typeof t)||null===t)&&e===t}notifyListeners(t,e=[],n=!0){const s=[];for(const i in t){let{single:o,bulk:r}=t[i];for(const t of o){if(e.includes(t))continue;const i=this.debugTime(t);t.listener.fn(t.value(),t.eventInfo),n&&s.push(t),this.debugListener(i,t)}for(const t of r){if(e.includes(t))continue;const i=this.debugTime(t),o=[];for(const e of t.value)o.push(Object.assign(Object.assign({},e),{value:e.value()}));t.listener.fn(o,t.eventInfo),n&&s.push(t),this.debugListener(i,t)}}return s}getSubscribedListeners(t,e,n,s="update",i=null){n=Object.assign(Object.assign({},Re),n);const o={};for(let[r,a]of this.listeners)if(o[r]={single:[],bulk:[],bulkData:[]},a.match(t)){const l=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,c=a.isRecursive||a.isWildcard?()=>this.get(this.cutPath(t,r)):()=>e,h=[{value:c,path:t,params:l}];for(const e of a.listeners.values())e.options.bulk?o[r].bulk.push({listener:e,listenersCollection:a,eventInfo:{type:s,listener:e,path:{listener:r,update:i||t,resolved:void 0},params:l,options:n},value:h}):o[r].single.push({listener:e,listenersCollection:a,eventInfo:{type:s,listener:e,path:{listener:r,update:i||t,resolved:this.cleanNotRecursivePath(t)},params:l,options:n},value:c})}return o}notifySubscribedListeners(t,e,n,s="update",i=null){return this.notifyListeners(this.getSubscribedListeners(t,e,n,s,i))}getNestedListeners(t,e,n,s="update",i=null){const o={};for(let[r,a]of this.listeners){o[r]={single:[],bulk:[]};const l=this.cutPath(r,t);if(this.match(l,t)){const c=this.trimPath(r.substr(l.length)),h=new Ee(e,this.options.delimeter,this.options.wildcard).get(c),d=a.paramsInfo?this.getParams(a.paramsInfo,t):void 0,u=[],p={};for(const e in h){const l=()=>h[e],c=[t,e].join(this.options.delimeter);for(const[e,h]of a.listeners){const f={type:s,listener:h,listenersCollection:a,path:{listener:r,update:i||t,resolved:this.cleanNotRecursivePath(c)},params:d,options:n};h.options.bulk?(u.push({value:l,path:c,params:d}),p[e]=h):o[r].single.push({listener:h,listenersCollection:a,eventInfo:f,value:l})}}for(const e in p){const i=p[e],l={type:s,listener:i,listenersCollection:a,path:{listener:r,update:t,resolved:void 0},options:n,params:d};o[r].bulk.push({listener:i,listenersCollection:a,eventInfo:l,value:u})}}}return o}notifyNestedListeners(t,e,n,s="update",i,o=null){return this.notifyListeners(this.getNestedListeners(t,e,n,s,o),i,!1)}getNotifyOnlyListeners(t,e,n,s="update",i=null){const o={};if("object"!=typeof n.only||!Array.isArray(n.only)||void 0===n.only[0]||!this.canBeNested(e))return o;for(const r of n.only){const a=new Ee(e,this.options.delimeter,this.options.wildcard).get(r);o[r]={bulk:[],single:[]};for(const e in a){const l=t+this.options.delimeter+e;for(const[c,h]of this.listeners){const d=h.paramsInfo?this.getParams(h.paramsInfo,l):void 0;if(this.match(c,l)){const u=()=>a[e],p=[{value:u,path:l,params:d}];for(const e of h.listeners.values()){const a={type:s,listener:e,listenersCollection:h,path:{listener:c,update:i||t,resolved:this.cleanNotRecursivePath(l)},params:d,options:n};e.options.bulk?o[r].bulk.some(t=>t.listener===e)||o[r].bulk.push({listener:e,listenersCollection:h,eventInfo:a,value:p}):o[r].single.push({listener:e,listenersCollection:h,eventInfo:a,value:u})}}}}}return o}notifyOnly(t,e,n,s="update",i=""){return void 0!==this.notifyListeners(this.getNotifyOnlyListeners(t,e,n,s,i))[0]}canBeNested(t){return"object"==typeof t&&null!==t}getUpdateValues(t,e,n){"object"==typeof t&&null!==t&&(t=Array.isArray(t)?t.slice():Object.assign({},t));let s=n;return"function"==typeof n&&(s=n(this.pathGet(e,this.data))),{newValue:s,oldValue:t}}wildcardUpdate(t,e,n=Re){n=Object.assign(Object.assign({},Re),n);const s=this.scan.get(t),i={};for(const t in s){const n=this.split(t),{oldValue:o,newValue:r}=this.getUpdateValues(s[t],n,e);this.same(r,o)||(i[t]=r)}const o=[],r=[];for(const e in i){const s=i[e];n.only.length?o.push(this.getNotifyOnlyListeners(e,s,n,"update",t)):(o.push(this.getSubscribedListeners(e,s,n,"update",t)),this.canBeNested(s)&&o.push(this.getNestedListeners(e,s,n,"update",t))),n.debug&&this.options.log("Wildcard update",{path:e,newValue:s}),this.pathSet(this.split(e),s,this.data),r.push(e)}let a=[];for(const t of o)a=[...a,...this.notifyListeners(t,a)];for(const t of r)this.executeWaitingListeners(t)}update(t,e,n=Re){if(this.isWildcard(t))return this.wildcardUpdate(t,e,n);const s=this.split(t),{oldValue:i,newValue:o}=this.getUpdateValues(this.pathGet(s,this.data),s,e);if(n.debug&&this.options.log(`Updating ${t} ${n.source?`from ${n.source}`:""}`,{oldValue:i,newValue:o}),this.same(o,i))return o;if(this.pathSet(s,o,this.data),null===(n=Object.assign(Object.assign({},Re),n)).only)return o;if(n.only.length)return this.notifyOnly(t,o,n),this.executeWaitingListeners(t),o;const r=this.notifySubscribedListeners(t,o,n);return this.canBeNested(o)&&this.notifyNestedListeners(t,o,n,"update",r),this.executeWaitingListeners(t),o}get(t){return void 0===t||""===t?this.data:this.pathGet(this.split(t),this.data)}debugSubscribe(t,e,n){t.options.debug&&this.options.log("listener subscribed",{listenerPath:n,listener:t,listenersCollection:e})}debugListener(t,e){(e.eventInfo.options.debug||e.listener.options.debug)&&this.options.log("Listener fired",{time:Date.now()-t,info:e})}debugTime(t){return t.listener.options.debug||t.eventInfo.options.debug?Date.now():0}}function Ve(t){return t&&"object"==typeof t&&!Array.isArray(t)}function je(t,...e){const n=e.shift();if(Ve(t)&&Ve(n))for(const e in n)if(Ve(n[e]))void 0===t[e]&&(t[e]={}),t[e]=je(t[e],n[e]);else if(Array.isArray(n[e])){t[e]=[];for(let s of n[e])Ve(s)?t[e].push(je({},s)):t[e].push(s)}else t[e]=n[e];return e.length?je(t,...e):t}const ze="gantt-schedule-timeline-calendar";const Xe={name:ze,stateFromConfig:function(t){const e=Te(),n=function(t,e){const n=je({},e.actions),s=je({},t.actions);let i=[...Object.keys(n),...Object.keys(s)];i=i.filter(t=>i.includes(t));const o={};for(const t of i)o[t]=[],void 0!==n[t]&&Array.isArray(n[t])&&(o[t]=[...n[t]]),void 0!==s[t]&&Array.isArray(s[t])&&(o[t]=[...o[t],...s[t]]);return delete t.actions,delete e.actions,o}(t,e),s={config:je({},e,t)};return s.config.actions=n,new He(s,{delimeter:"."})},mergeDeep:je,date:t=>t?Se(t):Se(),dayjs:Se};function We(t){const e=t.state,n=function(t){let e=t.get(),n=[];const s={},i={name:ze,debug:!1,setVido(t){},log(...t){this.debug&&console.log.call(console,...t)},mergeDeep:je,getClass(t){let e=`${ze}__${t}`;return t===this.name&&(e=this.name),e},allActions:[],getActions(e){this.allActions.includes(e)||this.allActions.push(e);let n=t.get("config.actions."+e);return void 0===n&&(n=[]),n.slice()},isItemInViewport:(t,e,n)=>t.time.start>=e&&t.time.start<n||t.time.end>=e&&t.time.end<n||t.time.start<=e&&t.time.end>=n,fillEmptyRowValues(t){let n=0;for(const s in t){const i=t[s];i._internal={parents:[],children:[],items:[]},"number"!=typeof i.height&&(i.height=e.config.list.rowHeight),"boolean"!=typeof i.expanded&&(i.expanded=!1),i.top=n,n+=i.height}return t},generateParents(t,e="parentId"){const n={};for(const s of t){const t=void 0!==s[e]?s[e]:"";void 0===n[t]&&(n[t]={}),n[t][s.id]=s}return n},fastTree(t,e,n=[]){const s=t[e.id];if(e._internal.parents=n,void 0===s)return e._internal.children=[],e;""!==e.id&&(n=[...n,e.id]),e._internal.children=Object.values(s);for(const e in s){const i=s[e];this.fastTree(t,i,n)}return e},makeTreeMap(t,e){const n=this.generateParents(e,"rowId");for(const e of t)e._internal.items=void 0!==n[e.id]?Object.values(n[e.id]):[];const s=this.generateParents(t);return this.fastTree(s,{id:"",_internal:{children:[],parents:[],items:[]}})},getFlatTreeMapById(t,e={}){for(const n of t._internal.children)e[n.id]=n,this.getFlatTreeMapById(n,e);return e},flattenTreeMap(t,e=[]){for(const n of t._internal.children)e.push(n.id),this.flattenTreeMap(n,e);return e},getRowsFromMap:(t,e)=>t.map(t=>e[t.id]),getRowsFromIds(t,e){const n=[];for(const s of t)n.push(e[s]);return n},getRowsWithParentsExpanded(t,e,n){if(!t||!e||!n||0===t.length||0===e.length||0===Object.keys(n).length)return[];const s=[];t:for(const i of t){for(const t of e[i]._internal.parents){const e=n[t];if(!e||!e.expanded)continue t}s.push(i)}return s},getRowsHeight(t){let e=0;for(const n of t)n&&(e+=n.height);return e},getVisibleRowsAndCompensation(e){const n=[];let s=0,i=0;const o=t.get("config.scroll.top"),r=t.get("_internal.height");let a=0,l=0;for(const t of e)if(void 0!==t&&(a=o+r,s+t.height>=o&&s<=a&&(t.top=i,l=t.top+o-s,i+=t.height,n.push(t)),s+=t.height,s>=a))break;return{visibleRows:n,compensation:l}},normalizeMouseWheelEvent(e){let n=e.deltaX||0,s=e.deltaY||0,i=e.deltaZ||0;const o=e.deltaMode,r=t.get("config.list.rowHeight");let a=1;switch(o){case 1:r&&(a=r);break;case 2:a=window.height}return n*=a,s*=a,i*=a,{x:n,y:s,z:i,event:e}},normalizePointerEvent(t){const e={x:0,y:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};switch(t.type){case"wheel":const n=this.normalizeMouseWheelEvent(t);e.x=n.x,e.y=n.y,e.pageX=e.x,e.pageY=e.y,e.screenX=e.x,e.screenY=e.y,e.clientX=e.x,e.clientY=e.y;break;case"touchstart":case"touchmove":case"touchend":case"touchcancel":e.x=t.changedTouches[0].screenX,e.y=t.changedTouches[0].screenY,e.pageX=t.changedTouches[0].pageX,e.pageY=t.changedTouches[0].pageY,e.screenX=t.changedTouches[0].screenX,e.screenY=t.changedTouches[0].screenY,e.clientX=t.changedTouches[0].clientX,e.clientY=t.changedTouches[0].clientY;break;default:e.x=t.x,e.y=t.y,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY}return e},limitScroll(e,n){if("top"===e){const e=t.get("_internal.list.rowsHeight")-t.get("_internal.height");return n<0?n=0:n>e&&(n=e),n}{const e=t.get("_internal.chart.time.totalViewDurationPx")-t.get("_internal.chart.dimensions.width");return n<0?n=0:n>e&&(n=e),n}},time:new Ie(t),getScrollBarHeight(t=0){const e=document.createElement("div");e.style.visibility="hidden",e.style.height="100px",document.body.appendChild(e);const n=e.offsetHeight;e.style.msOverflowStyle="scrollbar",e.style.overflow="scroll";const s=document.createElement("div");s.style.height="100%",e.appendChild(s);const i=s.offsetHeight;return e.parentNode.removeChild(e),n-i+t},getGridBlocksUnderRect(e,n,s,i){if(!t.get("_internal.elements.main"))return[]},getCompensationX:()=>t.get("config.scroll.compensation.x")||0,getCompensationY:()=>t.get("config.scroll.compensation.y")||0,getSVGIconSrc:t=>"string"==typeof s[t]?s[t]:(s[t]="data:image/svg+xml;base64,"+btoa(t),s[t]),destroy(){e=void 0;for(const t of n)t();n=[],i.debug&&delete window.state}};return i.debug&&(window.state=t,window.api=i),i}(e),s={components:{Main:Qt},scrollBarHeight:n.getScrollBarHeight(2),height:0,treeMap:{},flatTreeMap:[],flatTreeMapById:{},list:{expandedHeight:0,visibleRows:[],rows:{},width:0},dimensions:{width:0,height:0},chart:{dimensions:{width:0,innerWidth:0},visibleItems:[],time:{dates:{},timePerPixel:0,firstTaskTime:0,lastTaskTime:0,totalViewDurationMs:0,totalViewDurationPx:0,leftGlobal:0,rightGlobal:0,leftPx:0,rightPx:0,leftInner:0,rightInner:0,maxWidth:{}}},elements:{}};"boolean"==typeof t.debug&&t.debug&&(window.state=e),e.update("",t=>({config:t.config,_internal:s}));const i=St(e,n);return n.setVido(i),{state:e,app:i.createApp({component:Qt,props:{},element:t.element})}}We.api=Xe;export default We;
